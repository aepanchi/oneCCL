
<!DOCTYPE html>

<html>
  <head>
    <meta charset="ascii" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Environment Variables &#8212; oneCCL  documentation</title>
    
  <link href="_static/css/theme.css" rel="stylesheet">
  <link href="_static/css/index.ff1ffe594081f20da1ef19478df9384b.css" rel="stylesheet">

    
  <link rel="stylesheet"
    href="_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      

    
    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-book-theme.css?digest=c3fdc42140077d1ad13ad2f1588a4309" />
    <link rel="stylesheet" type="text/css" href="_static/tabs.css" />
    
  <link rel="preload" as="script" href="_static/js/index.be7d3bbb2ef33a8344ce.js">

    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/sphinx-book-theme.12a9622fbb08dcb3a2a40b2c02b83a57.js"></script>
    <link rel="shortcut icon" href="_static/favicons.png"/>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="oneCCL Benchmark User Guide" href="benchmark.html" />
    <link rel="prev" title="Point-To-Point Operations" href="api/operations/point-to-point.html" />
    <script defer type="text/javascript" src="https://www.intel.com/content/dam/www/global/wap/performance-config.js" ></script>
    <script type="text/javascript">
        // Configure TMS settings
        var wapLocalCode = 'us-en'; // Dynamically set per localized site, see mapping table for values
        var wapSection = "oneapi-ccl"; // WAP team will give you a unique section for your site
        // Load TMS
        (function () {
        var url = 'https://www.intel.com/content/dam/www/global/wap/tms-loader.js'; // WAP file URL
        var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true; po.src = url;
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
        })();
    </script>
    <link href="_static/style.css" rel="stylesheet" type="text/css">

  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<div class="col-12 col-md-3 bd-sidebar site-navigation show" id="site-navigation">
    
        <div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="index.html">
      
        <!-- `logo` is deprecated in Sphinx 4.0, so remove this when we stop supporting 3 -->
        
      
      
      <img src="_static/oneAPI-rgb-rev-100.png" class="logo" alt="logo">
      
      
      <h1 class="site-logo" id="site-title">oneCCL  documentation</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item active">
        <p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Get Started
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="introduction/release-notes.html">
   Release Notes
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="introduction/installation.html">
   Installation Guide
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="introduction/sample.html">
   Sample Application
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="introduction/cmake-configuration.html">
   Use oneCCL package from CMake
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Developer Guide
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="programming-model.html">
   Programming Model
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/>
  <label for="toctree-checkbox-1">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="programming-model/host-communication.html">
     Host Communication
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="programming-model/device-communication.html">
     Device Communication
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="programming-model/limitations.html">
     Limitations
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="general-configuration.html">
   General Configuration
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/>
  <label for="toctree-checkbox-2">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="general-configuration/operation-execution.html">
     Execution of Communication Operations
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="general-configuration/transport-selection.html">
     Transport Selection
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="advanced-configuration.html">
   Advanced Configuration
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/>
  <label for="toctree-checkbox-3">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="advanced-configuration/collective-algorithms-selection.html">
     Selection of Collective Algorithms
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="advanced-configuration/low-precision-datatypes.html">
     Low-precision Datatypes
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="advanced-configuration/operation-caching.html">
     Caching of Communication Operations
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="advanced-configuration/operation-prioritization.html">
     Prioritization of Communication Operations
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="advanced-configuration/operation-fusion.html">
     Fusion of Communication Operations
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="advanced-configuration/dmabuf.html">
     Enabling OFI/verbs/dmabuf Support
    </a>
   </li>
  </ul>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Developer Reference
 </span>
</p>
<ul class="current nav bd-sidenav">
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="api.html">
   oneCCL API
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" type="checkbox"/>
  <label for="toctree-checkbox-4">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="api/initialization.html">
     Initialization
    </a>
   </li>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="api/concepts.html">
     oneCCL Concepts
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" type="checkbox"/>
    <label for="toctree-checkbox-5">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3">
      <a class="reference internal" href="api/concepts/communicator.html">
       Communicator
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="api/concepts/context.html">
       Context
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="api/concepts/device.html">
       Device
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="api/concepts/event.html">
       Event
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="api/concepts/kvs.html">
       Key-value Store
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="api/concepts/stream.html">
       Stream
      </a>
     </li>
    </ul>
   </li>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="api/operations.html">
     Communication Operations
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" type="checkbox"/>
    <label for="toctree-checkbox-6">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3">
      <a class="reference internal" href="api/operations/datatypes.html">
       Datatypes
      </a>
     </li>
     <li class="toctree-l3 has-children">
      <a class="reference internal" href="api/operations/collective-operations.html">
       Collective Operations
      </a>
      <input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" type="checkbox"/>
      <label for="toctree-checkbox-7">
       <i class="fas fa-chevron-down">
       </i>
      </label>
      <ul>
       <li class="toctree-l4">
        <a class="reference internal" href="api/operations/collective-operations/allgatherv.html">
         Allgatherv
        </a>
       </li>
       <li class="toctree-l4">
        <a class="reference internal" href="api/operations/collective-operations/allreduce.html">
         Allreduce
        </a>
       </li>
       <li class="toctree-l4">
        <a class="reference internal" href="api/operations/collective-operations/alltoall.html">
         Alltoall
        </a>
       </li>
       <li class="toctree-l4">
        <a class="reference internal" href="api/operations/collective-operations/alltoallv.html">
         Alltoallv
        </a>
       </li>
       <li class="toctree-l4">
        <a class="reference internal" href="api/operations/collective-operations/barrier.html">
         Barrier
        </a>
       </li>
       <li class="toctree-l4">
        <a class="reference internal" href="api/operations/collective-operations/broadcast.html">
         Broadcast
        </a>
       </li>
       <li class="toctree-l4">
        <a class="reference internal" href="api/operations/collective-operations/reduce.html">
         Reduce
        </a>
       </li>
       <li class="toctree-l4">
        <a class="reference internal" href="api/operations/collective-operations/reduce-scatter.html">
         ReduceScatter
        </a>
       </li>
      </ul>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="api/operations/point-to-point.html">
       Point-To-Point Operations
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 current active">
  <a class="current reference internal" href="#">
   Environment Variables
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Benchmark User Guide
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="benchmark.html">
   oneCCL Benchmark User Guide
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Notices and Disclaimers
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="legal.html">
   Notices and Disclaimers
  </a>
 </li>
</ul>

    </div>
</nav> <!-- To handle the deprecated key -->

<div class="navbar_extra_footer">
  Theme by the <a href="https://ebp.jupyterbook.org">Executable Book Project</a>
</div>

</div>


          


          
<main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main">
    
    <div class="topbar container-xl fixed-top">
    <div class="topbar-contents row">
        <div class="col-12 col-md-3 bd-topbar-whitespace site-navigation show"></div>
        <div class="col pl-md-4 topbar-main">
            
            <button id="navbar-toggler" class="navbar-toggler ml-0" type="button" data-toggle="collapse"
                data-toggle="tooltip" data-placement="bottom" data-target=".site-navigation" aria-controls="navbar-menu"
                aria-expanded="true" aria-label="Toggle navigation" aria-controls="site-navigation"
                title="Toggle navigation" data-toggle="tooltip" data-placement="left">
                <i class="fas fa-bars"></i>
                <i class="fas fa-arrow-left"></i>
                <i class="fas fa-arrow-up"></i>
            </button>
            
            
<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn" aria-label="Download this page"><i
            class="fas fa-download"></i></button>

    <div class="dropdown-buttons">
        <!-- ipynb file if we had a myst markdown file -->
        
        <!-- Download raw file -->
        <a class="dropdown-buttons" href="_sources/env-variables.rst.txt"><button type="button"
                class="btn btn-secondary topbarbtn" title="Download source file" data-toggle="tooltip"
                data-placement="left">.rst</button></a>
        <!-- Download PDF via print -->
        <button type="button" id="download-print" class="btn btn-secondary topbarbtn" title="Print to PDF"
            onClick="window.print()" data-toggle="tooltip" data-placement="left">.pdf</button>
    </div>
</div>

            <!-- Source interaction buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Connect with source repository"><i class="fab fa-github"></i></button>
    <div class="dropdown-buttons sourcebuttons">
        
        <a class="issues-button"
            href="https://github.com/oneapi-src/oneCCL/issues/new?title=Issue%20on%20page%20%2Fenv-variables.html&body=Your%20issue%20content%20here."><button
                type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip" data-placement="left"
                title="Open an issue"><i class="fas fa-lightbulb"></i>open issue</button></a>
        <a class="edit-button" href="https://github.com/oneapi-src/oneCCL/edit/master/doc/rst/source/env-variables.rst"><button
                type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip" data-placement="left"
                title="Edit this page"><i class="fas fa-pencil-alt"></i>suggest edit</button></a>
    </div>
</div>

            <!-- Full screen (wrap in <a> to have style consistency -->

<a class="full-screen-button"><button type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip"
        data-placement="bottom" onclick="toggleFullScreen()" aria-label="Fullscreen mode"
        title="Fullscreen mode"><i
            class="fas fa-expand"></i></button></a>

            <!-- Launch buttons -->

        </div>

        <!-- Table of contents -->
        <div class="d-none d-md-block col-md-2 bd-toc show">
            
            <div class="tocsection onthispage pt-5 pb-3">
                <i class="fas fa-list"></i> Contents
            </div>
            <nav id="bd-toc-nav" aria-label="Page">
                <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#collective-algorithms-selection">
   Collective Algorithms Selection
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#level-zero-path-default">
     Level Zero Path (Default)
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#allgatherv">
       Allgatherv
      </a>
      <ul class="nav section-nav flex-column">
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#ccl-allgatherv">
         CCL_ALLGATHERV
        </a>
       </li>
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#ccl-allgatherv-monolithic-pipeline-kernel">
         CCL_ALLGATHERV_MONOLITHIC_PIPELINE_KERNEL
        </a>
       </li>
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#ccl-allgatherv-scaleout">
         CCL_ALLGATHERV_SCALEOUT
        </a>
       </li>
      </ul>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#allreduce">
       ALLREDUCE
      </a>
      <ul class="nav section-nav flex-column">
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#ccl-allreduce">
         CCL_ALLREDUCE
        </a>
       </li>
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#ccl-reduce-scatter-monolithic-pipeline-kernel-gpu-buffers-only">
         CCL_REDUCE_SCATTER_MONOLITHIC_PIPELINE_KERNEL (GPU buffers only)
        </a>
       </li>
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#ccl-allgatherv-monolithic-pipeline-kernel-gpu-buffers-only">
         CCL_ALLGATHERV_MONOLITHIC_PIPELINE_KERNEL (GPU buffers only)
        </a>
       </li>
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#ccl-allreduce-scaleout-gpu-buffers-only">
         CCL_ALLREDUCE_SCALEOUT (GPU buffers only)
        </a>
       </li>
      </ul>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#alltoall-alltoallv">
       ALLTOALL, ALLTOALLV
      </a>
      <ul class="nav section-nav flex-column">
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#ccl-alltoall-ccl-alltoallv">
         CCL_ALLTOALL, CCL_ALLTOALLV
        </a>
       </li>
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#ccl-alltoallv-monolithic-kernel">
         CCL_ALLTOALLV_MONOLITHIC_KERNEL
        </a>
       </li>
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#ccl-alltoall-scaleout-ccl-scaleout-alltoallv-scaleout">
         CCL_ALLTOALL_SCALEOUT, CCL_scaleout_ALLTOALLV_scaleout
        </a>
       </li>
      </ul>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#barrier">
       BARRIER
      </a>
      <ul class="nav section-nav flex-column">
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#ccl-barrier">
         CCL_BARRIER
        </a>
       </li>
      </ul>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#broadcast">
       BROADCAST
      </a>
      <ul class="nav section-nav flex-column">
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#ccl-bcast">
         CCL_BCAST
        </a>
       </li>
      </ul>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#reduce">
       REDUCE
      </a>
      <ul class="nav section-nav flex-column">
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#ccl-reduce">
         CCL_REDUCE
        </a>
       </li>
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#id2">
         CCL_REDUCE_SCATTER_MONOLITHIC_PIPELINE_KERNEL (GPU buffers only)
        </a>
       </li>
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#ccl-reduce-scaleout-gpu-buffers-only">
         CCL_REDUCE_SCALEOUT (GPU buffers only)
        </a>
       </li>
      </ul>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#reduce-scatter">
       REDUCE_SCATTER
      </a>
      <ul class="nav section-nav flex-column">
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#ccl-reduce-scatter">
         CCL_REDUCE_SCATTER
        </a>
       </li>
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#id3">
         CCL_REDUCE_SCATTER_MONOLITHIC_PIPELINE_KERNEL (GPU buffers only)
        </a>
       </li>
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#ccl-reduce-scatter-scaleout-gpu-buffers-only">
         CCL_REDUCE_SCATTER_SCALEOUT (GPU buffers only)
        </a>
       </li>
      </ul>
     </li>
    </ul>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#sycl-path">
     SYCL PATH
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#all-collectives">
       All collectives
      </a>
      <ul class="nav section-nav flex-column">
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#ccl-enable-sycl-kernels">
         CCL_ENABLE_SYCL_KERNELS
        </a>
       </li>
      </ul>
     </li>
    </ul>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#workers">
   Workers
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#ccl-worker-count">
     CCL_WORKER_COUNT
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#ccl-worker-affinity">
     CCL_WORKER_AFFINITY
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#ccl-worker-mem-affinity">
     CCL_WORKER_MEM_AFFINITY
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#atl">
   ATL
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#ccl-atl-transport">
     CCL_ATL_TRANSPORT
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#ccl-atl-hmem">
     CCL_ATL_HMEM
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#ccl-atl-shm">
     CCL_ATL_SHM
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#ccl-process-launcher">
     CCL_PROCESS_LAUNCHER
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#ccl-local-size">
     CCL_LOCAL_SIZE
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#ccl-local-rank">
     CCL_LOCAL_RANK
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#multi-nic">
   Multi-NIC
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#ccl-mnic">
     CCL_MNIC
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#ccl-mnic-name">
     CCL_MNIC_NAME
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#ccl-mnic-count">
     CCL_MNIC_COUNT
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#inter-process-communication-ipc">
   Inter Process Communication (IPC)
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#ccl-ze-cache-open-ipc-handles-threshold">
     CCL_ZE_CACHE_OPEN_IPC_HANDLES_THRESHOLD
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#ccl-ze-cache-get-ipc-handles-threshold">
     CCL_ZE_CACHE_GET_IPC_HANDLES_THRESHOLD
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#low-precision-datatypes">
   Low-precision datatypes
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#ccl-bf16">
     CCL_BF16
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#ccl-fp16">
     CCL_FP16
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#ccl-log-level">
   CCL_LOG_LEVEL
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#ccl-itt-level">
   CCL_ITT_LEVEL
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#fusion">
   Fusion
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#ccl-fusion">
     CCL_FUSION
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#ccl-fusion-bytes-threshold">
     CCL_FUSION_BYTES_THRESHOLD
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#ccl-fusion-count-threshold">
     CCL_FUSION_COUNT_THRESHOLD
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#ccl-fusion-cycle-ms">
     CCL_FUSION_CYCLE_MS
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#ccl-priority">
   CCL_PRIORITY
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#ccl-max-short-size">
   CCL_MAX_SHORT_SIZE
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#ccl-sycl-output-event">
   CCL_SYCL_OUTPUT_EVENT
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#ccl-ze-library-path">
   CCL_ZE_LIBRARY_PATH
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#point-to-point-operations">
   Point-To-Point Operations
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#ccl-recv">
     CCL_RECV
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#ccl-send">
     CCL_SEND
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#ccl-ze-tmp-buf-size">
   CCL_ZE_TMP_BUF_SIZE
  </a>
 </li>
</ul>

            </nav>
        </div>
    </div>
</div>
    <div id="main-content" class="row">
        <div class="col-12 col-md-9 pl-md-3 pr-md-0">
        
              <div>
                
  <section id="environment-variables">
<h1>Environment Variables<a class="headerlink" href="#environment-variables" title="Permalink to this headline">&#182;</a></h1>
<section id="collective-algorithms-selection">
<span id="id1"></span><h2>Collective Algorithms Selection<a class="headerlink" href="#collective-algorithms-selection" title="Permalink to this headline">&#182;</a></h2>
<p>oneCCL supports collective operations for the host (CPU) memory buffers and
device (GPU) memory buffers. In addition, oneCCL has two different paths to
support collectives with GPU buffers; one directly uses Level Zero, and the
other uses SYCL. The SYCL path is a new code being developed and not all
collectives are supported.</p>
<p>For the Level Zero implementation, in the case of GPU buffers, oneCCL
collectives are optimized to execute a hierarchical algorithm composed of an
optimized scale-up phase (communication between ranks/processes in the same
node) and a scaleout phase (communication between ranks/processes on different
nodes). In the case of CPU buffers, the current collective algorithms do not
have support for scale-up and scaleout phases; only a non-hierarchical
algorithm can be chosen.</p>
<p>With <code class="docutils literal notranslate"><span class="pre">CCL_&lt;coll_name&gt;</span> <span class="pre">=</span> <span class="pre">&lt;algo_name&gt;</span></code>, you can select the algorithm for the
collective in <code class="docutils literal notranslate"><span class="pre">&lt;coll_name&gt;</span></code>. For GPU buffers, the default algorithm is
<code class="docutils literal notranslate"><span class="pre">topo</span></code>, which refers to the scale-up algorithm. If you select an algorithm
different from <code class="docutils literal notranslate"><span class="pre">topo</span></code>, oneCCL will implement a non-hierarchical algorithm,
where it will copy the GPU buffers to the Host (CPU) and will run the specified
algorithm.</p>
<p>For CPU buffers, <code class="docutils literal notranslate"><span class="pre">topo</span></code> is not available; you can only select one of the
other algorithms in the table for a given collective.</p>
<p>If the collective uses GPU buffers, you can select whether the implementation
of the scale-up algorithm should use copy engines or kernels. There is also the
option to select the scaleout algorithm using
<code class="docutils literal notranslate"><span class="pre">CCL_&lt;coll_name&gt;_SCALEOUT=&lt;algo_name&gt;</span></code>.</p>
<p>Next, environment variables for collective algorithm selection are explained
based on the code path (Level Zero or SYCL), the collective being called, and
the type of buffer (GPU or CPU).</p>
<section id="level-zero-path-default">
<h3>Level Zero Path (Default)<a class="headerlink" href="#level-zero-path-default" title="Permalink to this headline">&#182;</a></h3>
<section id="allgatherv">
<h4>Allgatherv<a class="headerlink" href="#allgatherv" title="Permalink to this headline">&#182;</a></h4>
<section id="ccl-allgatherv">
<h5>CCL_ALLGATHERV<a class="headerlink" href="#ccl-allgatherv" title="Permalink to this headline">&#182;</a></h5>
<p><strong>Syntax</strong></p>
<p>For the whole message size:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">CCL_ALLGATHERV</span><span class="o">=&lt;</span><span class="n">algo_name</span><span class="o">&gt;</span><span class="w"></span>
</pre></div>
</div>
<p>For a specific message size range:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">CCL_ALLGATHERV</span><span class="o">=</span><span class="s">&quot;&lt;algo_name_1&gt;[:&lt;size_range_1&gt;][;&lt;algo_name_2&gt;:&lt;size_range_2&gt;][;...]&quot;</span><span class="w"></span>
</pre></div>
</div>
<p>Where:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">&lt;algo_name&gt;</span></code> is selected from the list of the available collective
algorithms.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&lt;size_range&gt;</span></code> is described by the left and the right size
borders in the <code class="docutils literal notranslate"><span class="pre">&lt;left&gt;-&lt;right&gt;</span></code> format. The size is specified in bytes. To
specify the maximum message size, use the reserved word max.</p></li>
</ul>
<p><strong>Example</strong></p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">CCL_ALLGATHERV</span><span class="o">=</span><span class="s">&quot;direct:0-8192;ring:8193-max&quot;</span><span class="w"></span>
</pre></div>
</div>
<p><strong>Arguments</strong></p>
<table class="colwidths-given table">
<colgroup>
<col style="width: 33%" />
<col style="width: 67%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>&lt;algo_name&gt;</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">topo</span></code></p></td>
<td><p>topology-aware algorithm for scale-up. The default for GPU buffers. Not available for CPU buffers.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">direct</span></code></p></td>
<td><p>Based on <code class="docutils literal notranslate"><span class="pre">MPI_Iallgatherv</span></code>.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">naive</span></code></p></td>
<td><p>Send to all, receive from all.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">flat</span></code></p></td>
<td><p>alltoall-based algorithm.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">multi_bcast</span></code></p></td>
<td><p>Series of broadcast operations with different root ranks.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">ring</span></code></p></td>
<td><p>ring-based algorithm.</p></td>
</tr>
</tbody>
</table>
<p><strong>Description</strong></p>
<p>Use this environment variable to specify the algorithm for ALLGATHERV.</p>
<p>If using GPU buffers, select <code class="docutils literal notranslate"><span class="pre">CCL_ALLGATHER=topo</span></code> (the default) to use a hierarchical algorithm for scale-up data transfer across GPUs in the same node.
For GPU buffers, when selecting an algorithm different from <code class="docutils literal notranslate"><span class="pre">topo</span></code>, oneCCL copies the data to the host and follows the specified CPU algorithm.</p>
</section>
<section id="ccl-allgatherv-monolithic-pipeline-kernel">
<h5>CCL_ALLGATHERV_MONOLITHIC_PIPELINE_KERNEL<a class="headerlink" href="#ccl-allgatherv-monolithic-pipeline-kernel" title="Permalink to this headline">&#182;</a></h5>
<p><strong>Syntax</strong></p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">CCL_ALLGATHERV_MONOLITHIC_PIPELINE_KERNEL</span><span class="o">=&lt;</span><span class="n">value</span><span class="o">&gt;</span><span class="w"></span>
</pre></div>
</div>
<p><strong>Arguments</strong></p>
<table class="colwidths-given table">
<colgroup>
<col style="width: 33%" />
<col style="width: 67%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>&lt;value&gt;</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">1</span></code></p></td>
<td><p>Uses compute kernels to transfer data across GPUs for the allgather phase of <code class="docutils literal notranslate"><span class="pre">ALLGATHERV</span></code>. The default value.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">0</span></code></p></td>
<td><p>Uses copy engines to transfer data across GPUs for the allgather phase of the <code class="docutils literal notranslate"><span class="pre">ALLGATHERV</span></code> collective.</p></td>
</tr>
</tbody>
</table>
<p><strong>Description</strong></p>
<p>Set this environment variable to use GPU buffers to specify the scale-up phase of the algorithm for ALLGATHERV.
This environment variable allows the user to choose between using compute kernels or copy engines.</p>
<p>This option is only available if <code class="docutils literal notranslate"><span class="pre">CCL_ALLGATHERV=topo</span></code> (the default for GPU buffers).</p>
</section>
<section id="ccl-allgatherv-scaleout">
<h5>CCL_ALLGATHERV_SCALEOUT<a class="headerlink" href="#ccl-allgatherv-scaleout" title="Permalink to this headline">&#182;</a></h5>
<p><strong>Syntax</strong></p>
<p>For the whole message size:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">CCL_ALLGATHER_SCALEOUT</span><span class="w"></span>
</pre></div>
</div>
<p>For a specific message size range:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">CCL_ALLGATHERV_SCALEOUT</span><span class="o">=</span><span class="s">&quot;&lt;algo_name_1&gt;[:&lt;size_range_1&gt;][;&lt;algo_name_2&gt;:&lt;size_range_2&gt;][;...]&quot;</span><span class="w"></span>
</pre></div>
</div>
<p>Where:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">&lt;algo_name&gt;</span></code> is selected from the list of the available scaleout
collective algorithms.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&lt;size_range&gt;</span></code> is described by the left and the
right size borders in the <code class="docutils literal notranslate"><span class="pre">&lt;left&gt;-&lt;right&gt;</span></code> format. The size is specified in
bytes. To specify the maximum message size, use the reserved word max.</p></li>
</ul>
<p><strong>Example</strong></p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">CCL_ALLGATHERV_SCALEOUT</span><span class="o">=</span><span class="s">&quot;direct:0-8192;ring:8193-max&quot;</span><span class="w"></span>
</pre></div>
</div>
<p><strong>Arguments</strong></p>
<table class="colwidths-given table">
<colgroup>
<col style="width: 33%" />
<col style="width: 67%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>&lt;algo_name&gt;</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">direct</span></code></p></td>
<td><p>Based on <code class="docutils literal notranslate"><span class="pre">MPI_Iallgatherv</span></code>.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">naive</span></code></p></td>
<td><p>Send to all, receive from all.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">flat</span></code></p></td>
<td><p>alltoall-based algorithm.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">multi_bcast</span></code></p></td>
<td><p>Series of broadcast operations with different root ranks.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">ring</span></code></p></td>
<td><p>ring-based algorithm. The default value.</p></td>
</tr>
</tbody>
</table>
<p><strong>Description</strong></p>
<p>Set this environment variable to use GPU buffers to specify the scaleout phase of the algorithm for ALLGATHERV.
This option is only available if <code class="docutils literal notranslate"><span class="pre">CCL_ALLGATHERV</span> <span class="pre">=</span> <span class="pre">topo</span></code> (the default for GPU buffers).</p>
<p>oneCCL internally fills the algorithm selection table with appropriate defaults. Your input complements the selection table.</p>
<p>To see the actual table values, set <code class="docutils literal notranslate"><span class="pre">CCL_LOG_LEVEL=info</span></code>.</p>
</section>
</section>
<section id="allreduce">
<h4>ALLREDUCE<a class="headerlink" href="#allreduce" title="Permalink to this headline">&#182;</a></h4>
<section id="ccl-allreduce">
<h5>CCL_ALLREDUCE<a class="headerlink" href="#ccl-allreduce" title="Permalink to this headline">&#182;</a></h5>
<p><strong>Syntax</strong></p>
<p>For the whole message size:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">CCL_ALLREDUCE</span><span class="o">=&lt;</span><span class="n">algo_name</span><span class="o">&gt;</span><span class="w"></span>
</pre></div>
</div>
<p>For a specific message size range:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">CCL_ALLREDUCE</span><span class="o">=</span><span class="s">&quot;&lt;algo_name_1&gt;[:&lt;size_range_1&gt;][;&lt;algo_name_2&gt;:&lt;size_range_2&gt;][;...]&quot;</span><span class="w"></span>
</pre></div>
</div>
<p>Where:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">&lt;algo_name&gt;</span></code> is selected from the list of available collective algorithms.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&lt;size_range&gt;</span></code> is described by the left and the right size
borders in the <code class="docutils literal notranslate"><span class="pre">&lt;left&gt;-&lt;right&gt;</span></code> format. The size is specified in bytes. To
specify the maximum message size, use the reserved word max.</p></li>
</ul>
<p><strong>Example</strong></p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">CCL_ALLREDUCE</span><span class="o">=</span><span class="s">&quot;recursive_doubling:0-8192;rabenseifner:8193-1048576;ring:1048577-max&quot;</span><span class="w"></span>
</pre></div>
</div>
<p><strong>Arguments</strong></p>
<table class="colwidths-given table">
<colgroup>
<col style="width: 33%" />
<col style="width: 67%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>&lt;algo_name&gt;</p></td>
<td><p>Description</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">topo</span></code></p></td>
<td><p>topology-aware algorithm for scale-up. The default for GPU buffers. Not available for CPU buffers.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">direct</span></code></p></td>
<td><p>Based on <code class="docutils literal notranslate"><span class="pre">MPI_Iallreduce</span></code>.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">rabenseifner</span></code></p></td>
<td><p>Rabenseifner algorithm.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">nreduce</span></code></p></td>
<td><p>May be beneficial for imbalanced workloads.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">ring</span></code></p></td>
<td><p>reduce_scatter + allgather ring. Use CCL_RS_CHUNK_COUNT and CCL_RS_MIN_CHUNK_SIZE to control pipelining on reduce_scatter phase.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">double_tree</span></code></p></td>
<td><p>double-tree algorithm.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">recursive_doubling</span></code></p></td>
<td><p>Recursive doubling algorithm.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">2d</span></code></p></td>
<td><p>Two-dimensional algorithm (reduce_scatter + allreduce + allgather).</p></td>
</tr>
</tbody>
</table>
<p><strong>Description</strong></p>
<p>Use this environment variable to specify the algorithm for ALLREDUCE.</p>
<p>If using GPU buffers, select <code class="docutils literal notranslate"><span class="pre">CCL_ALLREDUCE=topo</span></code> (the default) to use a hierarchical algorithm for scale-up data transfer across GPUs in the same node.
For GPU buffers, when selecting an algorithm different from <code class="docutils literal notranslate"><span class="pre">topo</span></code>, oneCCL copies the data to the host and follows the specified CPU algorithm.</p>
<p>oneCCL internally fills the algorithm selection table with appropriate defaults. Your input complements the selection table.</p>
<p>To see the actual table values, set <code class="docutils literal notranslate"><span class="pre">CCL_LOG_LEVEL=info</span></code>.</p>
</section>
<section id="ccl-reduce-scatter-monolithic-pipeline-kernel-gpu-buffers-only">
<h5>CCL_REDUCE_SCATTER_MONOLITHIC_PIPELINE_KERNEL (GPU buffers only)<a class="headerlink" href="#ccl-reduce-scatter-monolithic-pipeline-kernel-gpu-buffers-only" title="Permalink to this headline">&#182;</a></h5>
<p><strong>Syntax</strong></p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">CCL_REDUCE_SCATTER_MONOLITHIC_PIPELINE_KERNEL</span><span class="o">=&lt;</span><span class="n">value</span><span class="o">&gt;</span><span class="w"></span>
</pre></div>
</div>
<p><strong>Arguments</strong></p>
<table class="colwidths-given table">
<colgroup>
<col style="width: 33%" />
<col style="width: 67%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>&lt;value&gt;</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">1</span></code></p></td>
<td><p>Uses compute kernels to transfer data across GPUs for the reduce-scatter phase of the  <code class="docutils literal notranslate"><span class="pre">ALLREDUCE</span></code> collectives. The default value.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">0</span></code></p></td>
<td><p>Uses copy engines to transfer data across GPUs for the reduce-scatter phase of the <code class="docutils literal notranslate"><span class="pre">ALLREDUCE</span></code>.</p></td>
</tr>
</tbody>
</table>
<p><strong>Description</strong></p>
<p>Set this environment variable to use GPU buffers to specify how to perform the reduce_scatter portion of the scale-up <code class="docutils literal notranslate"><span class="pre">ALLREDUCE</span></code> collective.
This variable allows you to choose between using compute kernels or copy engines.</p>
<p>This option is only available if <code class="docutils literal notranslate"><span class="pre">CCL_ALLREDUCE=topo</span></code> (the default for GPU buffers).</p>
</section>
<section id="ccl-allgatherv-monolithic-pipeline-kernel-gpu-buffers-only">
<h5>CCL_ALLGATHERV_MONOLITHIC_PIPELINE_KERNEL (GPU buffers only)<a class="headerlink" href="#ccl-allgatherv-monolithic-pipeline-kernel-gpu-buffers-only" title="Permalink to this headline">&#182;</a></h5>
<p><strong>Syntax</strong></p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">CCL_ALLGATHERV_MONOLITHIC_PIPELINE_KERNEL</span><span class="o">=&lt;</span><span class="n">value</span><span class="o">&gt;</span><span class="w"></span>
</pre></div>
</div>
<p><strong>Arguments</strong></p>
<table class="colwidths-given table">
<colgroup>
<col style="width: 33%" />
<col style="width: 67%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>&lt;value&gt;</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">1</span></code></p></td>
<td><p>Uses compute kernels to transfer data across GPUs for the allgather phase of <code class="docutils literal notranslate"><span class="pre">ALLREDUCE</span></code>. The default value.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">0</span></code></p></td>
<td><p>Uses copy engines to transfer data across GPUs for the allgather phase of the <code class="docutils literal notranslate"><span class="pre">ALLREDUCE</span></code> collective.</p></td>
</tr>
</tbody>
</table>
<p><strong>Description</strong></p>
<p>ALLREDUCE is implemented as a reduce-scatter phase followed by an allgather phase.</p>
<p>Set this environment variable to use GPU buffers to specify how to perform the
allgather portion of the scale-up <code class="docutils literal notranslate"><span class="pre">ALLREDUCE</span></code> collective. This environment
variable allows the user to choose between using compute kernels or using copy
engines. This option is only available if <code class="docutils literal notranslate"><span class="pre">CCL_ALLGATHERV=topo</span></code> (the default
for GPU buffers).</p>
</section>
<section id="ccl-allreduce-scaleout-gpu-buffers-only">
<h5>CCL_ALLREDUCE_SCALEOUT (GPU buffers only)<a class="headerlink" href="#ccl-allreduce-scaleout-gpu-buffers-only" title="Permalink to this headline">&#182;</a></h5>
<p><strong>Syntax</strong></p>
<p>For the whole message size:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">CCL_ALLREDUCE_SCALEOUT</span><span class="o">=&lt;</span><span class="n">algo_name</span><span class="o">&gt;</span><span class="w"></span>
</pre></div>
</div>
<p>For a specific message size range:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">CCL_ALLREDUCE_SCALEOUT</span><span class="o">=</span><span class="s">&quot;&lt;algo_name_1&gt;[:&lt;size_range_1&gt;][;&lt;algo_name_2&gt;:&lt;size_range_2&gt;][;...]&quot;</span><span class="w"></span>
</pre></div>
</div>
<p>Where:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">&lt;algo_name&gt;</span></code> is selected from the list of available collective algorithms.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&lt;size_range&gt;</span></code> is described by the left and the right size borders the
<code class="docutils literal notranslate"><span class="pre">&lt;left&gt;-&lt;right&gt;</span></code> format. The size is specified in bytes. To specify the maximum message size, use the reserved word max.</p></li>
</ul>
<p><strong>Example</strong></p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">CCL_ALLREDUCE_SCALEOUT</span><span class="o">=</span><span class="s">&quot;recursive_doubling:0-8192;rabenseifner:8193-1048576;ring:1048577-max</span>
</pre></div>
</div>
<p><strong>Arguments</strong></p>
<table class="colwidths-given table">
<colgroup>
<col style="width: 33%" />
<col style="width: 67%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">direct</span></code></p></td>
<td><p>Based on <code class="docutils literal notranslate"><span class="pre">MPI_allreduce</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">rabenseifner</span></code></p></td>
<td><p>Rabenseifner algorithm.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">nreduce</span></code></p></td>
<td><p>May be beneficial for imbalanced workloads.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">ring</span></code></p></td>
<td><p>reduce_scatter + allgather ring. Use <code class="docutils literal notranslate"><span class="pre">CCL_RS_CHUNK_COUNT</span></code> and <code class="docutils literal notranslate"><span class="pre">CCL_RS_MIN_CHUNK_SIZE</span></code> to control pipelining on reduce_scatter phase. The default value.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">double_tree</span></code></p></td>
<td><p>double-tree algorithm.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">ring</span></code></p></td>
<td><p>Recursive doubling algorithm.</p></td>
</tr>
</tbody>
</table>
<p><strong>Description</strong></p>
<p>Set this environment variable to use GPU buffers to specify the scaleout algorithm for ALLREDUCE.
This option is only available if <code class="docutils literal notranslate"><span class="pre">CCL_ALLREDUCE</span> <span class="pre">=</span> <span class="pre">topo</span></code> (the default for GPU buffers).</p>
<p>oneCCL internally fills the algorithm selection table with appropriate defaults. Your input complements the selection table.</p>
<p>To see the actual table values, set <code class="docutils literal notranslate"><span class="pre">CCL_LOG_LEVEL=info</span></code>.</p>
</section>
</section>
<section id="alltoall-alltoallv">
<h4>ALLTOALL, ALLTOALLV<a class="headerlink" href="#alltoall-alltoallv" title="Permalink to this headline">&#182;</a></h4>
<section id="ccl-alltoall-ccl-alltoallv">
<h5>CCL_ALLTOALL, CCL_ALLTOALLV<a class="headerlink" href="#ccl-alltoall-ccl-alltoallv" title="Permalink to this headline">&#182;</a></h5>
<p><strong>Syntax</strong></p>
<p>For the whole message size:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">CCL_ALLTOALL</span><span class="o">=&lt;</span><span class="n">algo_name</span><span class="o">&gt;</span><span class="w">  </span><span class="n">or</span><span class="w"> </span><span class="n">CCL_ALLTOALLV</span><span class="o">=&lt;</span><span class="n">algo_name</span><span class="o">&gt;</span><span class="w"></span>
</pre></div>
</div>
<p>For a specific message size range:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">CCL_ALLTOALL</span><span class="o">=</span><span class="s">&quot;&lt;algo_name_1&gt;[:&lt;size_range_1&gt;][;&lt;algo_name_2&gt;:&lt;size_range_2&gt;][;...]&quot;</span><span class="w"></span>
</pre></div>
</div>
<p>or</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">CCL_ALLTOALLV</span><span class="o">=</span><span class="s">&quot;&lt;algo_name_1&gt;[:&lt;size_range_1&gt;][;&lt;algo_name_2&gt;:&lt;size_range_2&gt;][;...]&quot;</span><span class="w"></span>
</pre></div>
</div>
<p>Where:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">&lt;algo_name&gt;</span></code> is selected from the list of available collective algorithms.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&lt;size_range&gt;</span></code> is described by the left and the right size borders in the
<code class="docutils literal notranslate"><span class="pre">&lt;left&gt;-&lt;right&gt;</span></code> format. The size is specified in bytes. To specify the maximum message size, use the reserved word max.</p></li>
</ul>
<p><strong>Example</strong></p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">CCL_ALLTOALL</span><span class="o">=</span><span class="s">&quot;naive:0-8192;scatter:8193-max&quot;</span><span class="w"></span>
</pre></div>
</div>
<p>or</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">CCL_ALLTOALLV</span><span class="o">=</span><span class="s">&quot;naive:0-8192;scatter:8193-max&quot;</span><span class="w"></span>
</pre></div>
</div>
<p><strong>Arguments</strong></p>
<table class="colwidths-given table">
<colgroup>
<col style="width: 33%" />
<col style="width: 67%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">topo</span></code></p></td>
<td><p>topology-aware algorithm. The default for GPU buffers. Not available for CPU buffers.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">direct</span></code></p></td>
<td><p>Based on <code class="docutils literal notranslate"><span class="pre">MPI_Ialltoall</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">naive</span></code></p></td>
<td><p>Send to all, receive from all.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">scatter</span></code></p></td>
<td><p>scatter-based algorithm.</p></td>
</tr>
</tbody>
</table>
</section>
<section id="ccl-alltoallv-monolithic-kernel">
<h5>CCL_ALLTOALLV_MONOLITHIC_KERNEL<a class="headerlink" href="#ccl-alltoallv-monolithic-kernel" title="Permalink to this headline">&#182;</a></h5>
<p><strong>Syntax</strong></p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">CCL_ALLTOALLV_MONOLITHIC_KERNEL</span><span class="o">=&lt;</span><span class="n">value</span><span class="o">&gt;</span><span class="w"></span>
</pre></div>
</div>
<p><strong>Arguments</strong></p>
<table class="colwidths-given table">
<colgroup>
<col style="width: 33%" />
<col style="width: 67%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>&lt;value&gt;</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">1</span></code></p></td>
<td><p>Uses compute kernels to transfer data across GPUs for the allgather phase of the <code class="docutils literal notranslate"><span class="pre">ALLTOALL</span></code> and <code class="docutils literal notranslate"><span class="pre">ALLTOALLV</span></code> collectives. The default value.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">0</span></code></p></td>
<td><p>Uses copy engines to transfer data across GPUs for the allgather phase of the <code class="docutils literal notranslate"><span class="pre">ALLTOALL</span></code> and <code class="docutils literal notranslate"><span class="pre">ALLTOALLV</span></code> collectives.</p></td>
</tr>
</tbody>
</table>
<p><strong>Description</strong></p>
<p>Set this environment variable to use GPU buffers to specify the scale-up algorithm for <code class="docutils literal notranslate"><span class="pre">ALLTOALL</span></code> or <code class="docutils literal notranslate"><span class="pre">ALLTOALLV</span></code>
This environment variable allows the user to choose between using compute kernels or using copy engines.</p>
<p>This option is only available if <code class="docutils literal notranslate"><span class="pre">CCL_ALLTOALL=topo</span></code> or <code class="docutils literal notranslate"><span class="pre">CCL_ALLTOALLV=topo</span></code>. The default for GPU buffers.</p>
</section>
<section id="ccl-alltoall-scaleout-ccl-scaleout-alltoallv-scaleout">
<h5>CCL_ALLTOALL_SCALEOUT, CCL_scaleout_ALLTOALLV_scaleout<a class="headerlink" href="#ccl-alltoall-scaleout-ccl-scaleout-alltoallv-scaleout" title="Permalink to this headline">&#182;</a></h5>
<p><strong>Syntax</strong></p>
<p>For the whole message size:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">CCL_ALLTOALL_SCALEOUT</span><span class="o">=&lt;</span><span class="n">algo_name</span><span class="o">&gt;</span><span class="w">  </span><span class="n">or</span><span class="w"> </span><span class="n">CCL_ALLTOALLV_SCALEOUT</span><span class="o">=&lt;</span><span class="n">algo_name</span><span class="o">&gt;</span><span class="w"></span>
</pre></div>
</div>
<p>For a specific message size range:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">CCL_ALLTOALL_SCALEOUT</span><span class="o">=</span><span class="s">&quot;&lt;algo_name_1&gt;[:&lt;size_range_1&gt;][;&lt;algo_name_2&gt;:&lt;size_range_2&gt;][;...]&quot;</span><span class="w"></span>
</pre></div>
</div>
<p>or</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">CCL_ALLTOALLV_SCALEOUT</span><span class="o">=</span><span class="s">&quot;&lt;algo_name_1&gt;[:&lt;size_range_1&gt;][;&lt;algo_name_2&gt;:&lt;size_range_2&gt;][;...]&quot;</span><span class="w"></span>
</pre></div>
</div>
<p>Where:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">&lt;algo_name&gt;</span></code> is selected from the list of available collective algorithms.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&lt;size_range&gt;</span></code> is described by the left and the right size borders in a
format <code class="docutils literal notranslate"><span class="pre">&lt;left&gt;-&lt;right&gt;</span></code>. The size is specified in bytes. To specify the maximum message size, use the reserved word max.</p></li>
</ul>
<p><strong>Example</strong></p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">CCL_ALLTOALL_SCALEOUT</span><span class="o">=</span><span class="s">&quot;naive:0-8192;scatter:8193-max&quot;</span><span class="w"></span>
</pre></div>
</div>
<p>or</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">CCL_ALLTOALLV_SCALEOUT</span><span class="o">=</span><span class="s">&quot;naive:0-8192;scatter:8193-max&quot;</span><span class="w"></span>
</pre></div>
</div>
<p><strong>Arguments</strong></p>
<table class="colwidths-given table">
<colgroup>
<col style="width: 33%" />
<col style="width: 67%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>&lt;algo_name&gt;</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">naive</span></code></p></td>
<td><p>Send to all, receive from all.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">scatter</span></code></p></td>
<td><p>scatter-based algorithm. The default value.</p></td>
</tr>
</tbody>
</table>
<p><strong>Description</strong></p>
<p>Set this environment variable to use GPU buffers to specify the scaleout algorithm for <code class="docutils literal notranslate"><span class="pre">ALLTOALL</span></code> or <code class="docutils literal notranslate"><span class="pre">ALLTOALLV</span></code>.
This option is only available if <code class="docutils literal notranslate"><span class="pre">CCL_ALLTOALL=topo</span></code> or <code class="docutils literal notranslate"><span class="pre">CCL_ALLTOALLV=topo</span></code> (the default for GPU buffers).</p>
<p>oneCCL internally fills the algorithm selection table with appropriate defaults. Your input complements the selection table.</p>
<p>To see the actual table values, set <code class="docutils literal notranslate"><span class="pre">CCL_LOG_LEVEL=info</span></code>.</p>
</section>
</section>
<section id="barrier">
<h4>BARRIER<a class="headerlink" href="#barrier" title="Permalink to this headline">&#182;</a></h4>
<section id="ccl-barrier">
<h5>CCL_BARRIER<a class="headerlink" href="#ccl-barrier" title="Permalink to this headline">&#182;</a></h5>
<p><strong>Syntax</strong></p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">CCL_BARRIER</span><span class="o">=&lt;</span><span class="n">algo_name</span><span class="o">&gt;</span><span class="w"></span>
</pre></div>
</div>
<p><strong>Arguments</strong></p>
<table class="colwidths-given table">
<colgroup>
<col style="width: 33%" />
<col style="width: 67%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>&lt;algo_name&gt;</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">direct</span></code></p></td>
<td><p>Based on <code class="docutils literal notranslate"><span class="pre">MPI_Ibarrier</span></code>.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">ring</span></code></p></td>
<td><p>Ring-based algorithm.</p></td>
</tr>
</tbody>
</table>
<p><strong>Description</strong></p>
<p>Use this environment variable to select the barrier algorithm.</p>
</section>
</section>
<section id="broadcast">
<h4>BROADCAST<a class="headerlink" href="#broadcast" title="Permalink to this headline">&#182;</a></h4>
<section id="ccl-bcast">
<h5>CCL_BCAST<a class="headerlink" href="#ccl-bcast" title="Permalink to this headline">&#182;</a></h5>
<p><strong>Syntax</strong></p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">CCL_BCAST</span><span class="o">=&lt;</span><span class="n">algo_name</span><span class="o">&gt;</span><span class="w"></span>
</pre></div>
</div>
<p><strong>Arguments</strong></p>
<table class="colwidths-given table">
<colgroup>
<col style="width: 33%" />
<col style="width: 67%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>&lt;algo_name&gt;</p></td>
<td><p>Description</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">topo</span></code></p></td>
<td><p>topology-aware algorithm. The default for GPU buffers. Not available for CPU buffers.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">direct</span></code></p></td>
<td><p>Based on&#8239;MPI_Ibcast.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">ring</span></code></p></td>
<td><p>ring-based algorithm.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">double_tree</span></code></p></td>
<td><p>double-tree algorithm.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">naive</span></code></p></td>
<td><p>Send to all from root rank.</p></td>
</tr>
</tbody>
</table>
<p><strong>Description</strong></p>
<p>Use this environment variable to select the algorithm used for broadcast.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The <code class="docutils literal notranslate"><span class="pre">BCAST</span></code> algorithm does not yet support the <code class="docutils literal notranslate"><span class="pre">CCL_BCAST_scaleout</span></code>
environment variable. To change the algorithm for <code class="docutils literal notranslate"><span class="pre">BCAST</span></code>, use the <code class="docutils literal notranslate"><span class="pre">CCL_BCAST</span></code> environment variable.</p>
</div>
</section>
</section>
<section id="reduce">
<h4>REDUCE<a class="headerlink" href="#reduce" title="Permalink to this headline">&#182;</a></h4>
<section id="ccl-reduce">
<h5>CCL_REDUCE<a class="headerlink" href="#ccl-reduce" title="Permalink to this headline">&#182;</a></h5>
<p><strong>Syntax</strong></p>
<p>For the whole message size:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">CCL_REDUCE</span><span class="o">=&lt;</span><span class="n">algo_name</span><span class="o">&gt;</span><span class="w"></span>
</pre></div>
</div>
<p>For a specific message size range:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">CCL_REDUCE</span><span class="o">=</span><span class="s">&quot;&lt;algo_name_1&gt;[:&lt;size_range_1&gt;][;&lt;algo_name_2&gt;:&lt;size_range_2&gt;][;...]&quot;</span><span class="w"></span>
</pre></div>
</div>
<p>Where:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">&lt;algo_name&gt;</span></code> is selected from the list of available collective algorithms.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&lt;size_range&gt;</span></code> is described by the left and the right size borders in the
<code class="docutils literal notranslate"><span class="pre">&lt;left&gt;-&lt;right&gt;</span></code> format. The size is specified in bytes. To specify the maximum message size, use the reserved word max.</p></li>
</ul>
<p><strong>Example</strong></p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">CCL_REDUCE</span><span class="o">=</span><span class="s">&quot;direct:0-8192;double_tree:1048577-max&quot;</span><span class="w"></span>
</pre></div>
</div>
<p><strong>Arguments</strong></p>
<table class="colwidths-given table">
<colgroup>
<col style="width: 33%" />
<col style="width: 67%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>&lt;algo_name&gt;</p></td>
<td><p>Description</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">topo</span></code></p></td>
<td><p>topology-aware algorithm for scale-up. The default for GPU buffers. Not available for CPU buffers.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">direct</span></code></p></td>
<td><p>Based on <code class="docutils literal notranslate"><span class="pre">MPI_Ireduce</span></code>.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">rabenseifner</span></code></p></td>
<td><p>Rabenseifner algorithm.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">tree</span></code></p></td>
<td><p>tree algorithm</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">double_tree</span></code></p></td>
<td><p>double-tree algorithm.</p></td>
</tr>
</tbody>
</table>
<p><strong>Description</strong></p>
<p>Set this environment variable to specify the algorithm for <code class="docutils literal notranslate"><span class="pre">REDUCE</span></code>.</p>
<p>If using GPU buffers, select <code class="docutils literal notranslate"><span class="pre">CCL_REDUCE=topo</span></code> (the default) to use a hierarchical algorithm for scale-up data transfer across GPUs in the same node.
For GPU buffers, when selecting an algorithm different from <code class="docutils literal notranslate"><span class="pre">topo</span></code>, oneCCL copies the data to the host and follows the specified CPU algorithm.</p>
<p>oneCCL internally fills the algorithm selection table with appropriate defaults. Your input complements the selection table.</p>
<p>To see the actual table values, set <code class="docutils literal notranslate"><span class="pre">CCL_LOG_LEVEL=info</span></code>.</p>
</section>
<section id="id2">
<h5>CCL_REDUCE_SCATTER_MONOLITHIC_PIPELINE_KERNEL (GPU buffers only)<a class="headerlink" href="#id2" title="Permalink to this headline">&#182;</a></h5>
<p><strong>Syntax</strong></p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">CCL_REDUCE_SCATTER_MONOLITHIC_PIPELINE_KERNEL</span><span class="o">=&lt;</span><span class="n">value</span><span class="o">&gt;</span><span class="w"></span>
</pre></div>
</div>
<p><strong>Arguments</strong></p>
<table class="colwidths-given table">
<colgroup>
<col style="width: 33%" />
<col style="width: 67%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>&lt;value&gt;</p></td>
<td><p>Description</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">1</span></code></p></td>
<td><p>Uses compute kernels to transfer data across GPUs for the reduce-scatter phase of the <code class="docutils literal notranslate"><span class="pre">REDUCE</span></code> collective. The default value.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">0</span></code></p></td>
<td><p>Uses copy engines to transfer data across GPUs for the reduce-scatter phase of the <code class="docutils literal notranslate"><span class="pre">REDUCE</span></code> collective.</p></td>
</tr>
</tbody>
</table>
<p><strong>Description</strong></p>
<p>Set this environment variable to use GPU buffers to specify the scale-up algorithm for ALLREDUCE.
This environment variable allows the user to choose between using compute kernels or using copy engines.</p>
<p>This option is only available if <code class="docutils literal notranslate"><span class="pre">CCL_REDUCE=topo</span></code> (the default for GPU buffers).</p>
</section>
<section id="ccl-reduce-scaleout-gpu-buffers-only">
<h5>CCL_REDUCE_SCALEOUT (GPU buffers only)<a class="headerlink" href="#ccl-reduce-scaleout-gpu-buffers-only" title="Permalink to this headline">&#182;</a></h5>
<p><strong>Syntax</strong></p>
<p>For the whole message size:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">CCL_REDUCE_SCALEOUT</span><span class="o">=&lt;</span><span class="n">algo_name</span><span class="o">&gt;</span><span class="w"></span>
</pre></div>
</div>
<p>For a specific message size range:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">CCL_REDUCE_SCALEOUT</span><span class="o">=</span><span class="s">&quot;&lt;algo_name_1&gt;[:&lt;size_range_1&gt;][;&lt;algo_name_2&gt;:&lt;size_range_2&gt;][;...]&quot;</span><span class="w"></span>
</pre></div>
</div>
<p>Where:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">&lt;algo_name&gt;</span></code> is selected from the list of available collective algorithms.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&lt;size_range&gt;</span></code> is described by the left and the right size borders in
a format <code class="docutils literal notranslate"><span class="pre">&lt;left&gt;-&lt;right&gt;</span></code>. The size is specified in bytes. To specify the maximum message size, use the reserved word max.</p></li>
</ul>
<p><strong>Example</strong></p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">CCL_REDUCE_SCALEOUT</span><span class="o">=</span><span class="s">&quot;direct:0-8192;double_tree:1048577-max&quot;</span><span class="w"></span>
</pre></div>
</div>
<p><strong>Arguments</strong></p>
<table class="colwidths-given table">
<colgroup>
<col style="width: 33%" />
<col style="width: 67%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>&lt;algo_name&gt;</p></td>
<td><p>Description</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">direct</span></code></p></td>
<td><p>Based on <code class="docutils literal notranslate"><span class="pre">MPI_Ireduce</span></code>.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">rabenseifner</span></code></p></td>
<td><p>Rabenseifner algorithm.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">tree</span></code></p></td>
<td><p>tree algorithm.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">double_tree</span></code></p></td>
<td><p>double-tree algorithm. The default value.</p></td>
</tr>
</tbody>
</table>
<p><strong>Description</strong></p>
<p>Set this environment variable to use GPU buffers to specify the scaleout algorithm for <code class="docutils literal notranslate"><span class="pre">REDUCE</span></code>.
This option is only available if <code class="docutils literal notranslate"><span class="pre">CCL_REDUCE=topo</span></code> (the default for GPU buffers).</p>
<p>oneCCL internally fills the algorithm selection table with appropriate defaults. Your input complements the selection table.</p>
<p>To see the actual table values, set <code class="docutils literal notranslate"><span class="pre">CCL_LOG_LEVEL=info</span></code>.</p>
</section>
</section>
<section id="reduce-scatter">
<h4>REDUCE_SCATTER<a class="headerlink" href="#reduce-scatter" title="Permalink to this headline">&#182;</a></h4>
<section id="ccl-reduce-scatter">
<h5>CCL_REDUCE_SCATTER<a class="headerlink" href="#ccl-reduce-scatter" title="Permalink to this headline">&#182;</a></h5>
<p><strong>Syntax</strong></p>
<p>For the whole message size:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">CCL_REDUCE_SCATTER</span><span class="o">=&lt;</span><span class="n">algo_name</span><span class="o">&gt;</span><span class="w"></span>
</pre></div>
</div>
<p>For a specific message size range:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">CCL_REDUCE_SCATTER</span><span class="o">=</span><span class="s">&quot;&lt;algo_name_1&gt;[:&lt;size_range_1&gt;][;&lt;algo_name_2&gt;:&lt;size_range_2&gt;][;...]&quot;</span><span class="w"></span>
</pre></div>
</div>
<p>Where:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">&lt;algo_name&gt;</span></code> is selected from the list of available collective algorithms.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&lt;size_range&gt;</span></code> is described by the left and the right size borders in a
format <code class="docutils literal notranslate"><span class="pre">&lt;left&gt;-&lt;right&gt;</span></code>. The size is specified in bytes. To specify the maximum message size, use the reserved word max.</p></li>
</ul>
<p><strong>Example</strong></p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">CCL_REDUCE_SCATTER</span><span class="o">=</span><span class="s">&quot;direct:0-8192;ring:1048577-max&quot;</span><span class="w"></span>
</pre></div>
</div>
<p><strong>Arguments</strong></p>
<table class="colwidths-given table">
<colgroup>
<col style="width: 33%" />
<col style="width: 67%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>&lt;algo_name&gt;</p></td>
<td><p>Description</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">topo</span></code></p></td>
<td><p>topology-aware algorithm for scale-up. The default for GPU buffers. Not available for CPU buffers.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">direct</span></code></p></td>
<td><p>Based on <code class="docutils literal notranslate"><span class="pre">MPI_Ireduce_scatter_block</span></code>.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">naive</span></code></p></td>
<td><p>Send to all, receive, and reduce from all.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">ring</span></code></p></td>
<td><p>ring-based algorithm. Use <code class="docutils literal notranslate"><span class="pre">CCL_RS_CHUNK_COUNT</span></code> and <code class="docutils literal notranslate"><span class="pre">CCL_RS_MIN_CHUNK_SIZE</span></code> to control pipelining.</p></td>
</tr>
</tbody>
</table>
<p><strong>Description</strong></p>
<p>Use this environment variable to specify the algorithm for reduce. If using GPU
buffers, select <code class="docutils literal notranslate"><span class="pre">CCL_REDUCE_SCATTER=topo</span></code> (the default) to use a hierarchical
algorithm for scale-up data transfer across GPUs in the same node. For GPU
buffers,when selecting an algorithm different from <code class="docutils literal notranslate"><span class="pre">topo</span></code>, oneCCL copies the
data to the host and follow the specified CPU algorithm.</p>
<p>oneCCL internally fills the algorithm selection table with appropriate defaults. Your input complements the selection table.</p>
<p>To see the actual table values, set <code class="docutils literal notranslate"><span class="pre">CCL_LOG_LEVEL=info</span></code>.</p>
</section>
<section id="id3">
<h5>CCL_REDUCE_SCATTER_MONOLITHIC_PIPELINE_KERNEL (GPU buffers only)<a class="headerlink" href="#id3" title="Permalink to this headline">&#182;</a></h5>
<p><strong>Syntax</strong></p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">CCL_REDUCE_SCATTER_MONOLITHIC_PIPELINE_KERNEL</span><span class="o">=&lt;</span><span class="n">value</span><span class="o">&gt;</span><span class="w"></span>
</pre></div>
</div>
<p><strong>Arguments</strong></p>
<table class="colwidths-given table">
<colgroup>
<col style="width: 33%" />
<col style="width: 67%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>&lt;value&gt;</p></td>
<td><p>Description</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">1</span></code></p></td>
<td><p>Uses compute kernels to transfer data across GPUs for the reduce-scatter phase of the <code class="docutils literal notranslate"><span class="pre">REDUCE_SCATTER</span></code> collective. The default value.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">0</span></code></p></td>
<td><p>Uses copy engines to transfer data across GPUs for the reduce-scatter phase of the <code class="docutils literal notranslate"><span class="pre">REDUCE_SCATTER</span></code> collective.</p></td>
</tr>
</tbody>
</table>
<p><strong>Description</strong></p>
<p>Set this environment variable to use GPU buffers to specify how to perform the reduce-scatter portion of the scale-up <code class="docutils literal notranslate"><span class="pre">REDUCE_SCATTER</span></code> collective.
This environment variable allows the user to choose between using compute kernels or using copy engines.</p>
<p>This option is only available if <code class="docutils literal notranslate"><span class="pre">CCL_REDUCE_SCATTER=topo</span></code>  (the default for GPU buffers).</p>
</section>
<section id="ccl-reduce-scatter-scaleout-gpu-buffers-only">
<h5>CCL_REDUCE_SCATTER_SCALEOUT (GPU buffers only)<a class="headerlink" href="#ccl-reduce-scatter-scaleout-gpu-buffers-only" title="Permalink to this headline">&#182;</a></h5>
<p><strong>Syntax</strong></p>
<p>For the whole message size:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">CCL_REDUCE_SCATTER_SCALEOUT</span><span class="o">=&lt;</span><span class="n">algo_name</span><span class="o">&gt;</span><span class="w"></span>
</pre></div>
</div>
<p>For a specific message size range:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">CCL_REDUCE_SCATTER_SCALEOUT</span><span class="o">=</span><span class="s">&quot;&lt;algo_name_1&gt;[:&lt;size_range_1&gt;][;&lt;algo_name_2&gt;:&lt;size_range_2&gt;][;...]&quot;</span><span class="w"></span>
</pre></div>
</div>
<p>Where:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">&lt;algo_name&gt;</span></code> is selected from the list of available collective algorithms.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&lt;size_range&gt;</span></code> is described by the left and the right size borders in a
format <code class="docutils literal notranslate"><span class="pre">&lt;left&gt;-&lt;right&gt;</span></code>. The size is specified in bytes. To specify the maximum message size, use the reserved word max.</p></li>
</ul>
<p><strong>Example</strong></p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">CCL_REDUCE_SCATTER_SCALEOUT</span><span class="o">=</span><span class="s">&quot;direct:0-8192;double_tree:1048577-max&quot;</span><span class="w"></span>
</pre></div>
</div>
<p><strong>Arguments</strong></p>
<table class="colwidths-given table">
<colgroup>
<col style="width: 33%" />
<col style="width: 67%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>&lt;algo_name&gt;</p></td>
<td><p>Description</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">direct</span></code></p></td>
<td><p>Based on <code class="docutils literal notranslate"><span class="pre">MPI_Ireduce_scatter_block</span></code>.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">naive</span></code></p></td>
<td><p>Send to all, receive, and reduce from all. The default value.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">ring</span></code></p></td>
<td><p>Ring-based algorithm. Use <code class="docutils literal notranslate"><span class="pre">CCL_RS_CHUNK_COUNT</span></code> and <code class="docutils literal notranslate"><span class="pre">CCL_RS_MIN_CHUNK_SIZE</span></code> to control pipelining.</p></td>
</tr>
</tbody>
</table>
<p><strong>Description</strong></p>
<p>Set this environment variable to use GPU buffers to specify the scaleout algorithm for ALLREDUCE.
This option is only available if <code class="docutils literal notranslate"><span class="pre">CCL_REDUCE_SCATTER</span> <span class="pre">=</span> <span class="pre">topo</span></code> (the default for GPU buffers).</p>
<p>oneCCL internally fills the algorithm selection table with appropriate defaults. Your input complements the selection table.</p>
<p>To see the actual table values, set <code class="docutils literal notranslate"><span class="pre">CCL_LOG_LEVEL=info</span></code>.</p>
</section>
</section>
</section>
<section id="sycl-path">
<h3>SYCL PATH<a class="headerlink" href="#sycl-path" title="Permalink to this headline">&#182;</a></h3>
<section id="all-collectives">
<h4>All collectives<a class="headerlink" href="#all-collectives" title="Permalink to this headline">&#182;</a></h4>
<section id="ccl-enable-sycl-kernels">
<h5>CCL_ENABLE_SYCL_KERNELS<a class="headerlink" href="#ccl-enable-sycl-kernels" title="Permalink to this headline">&#182;</a></h5>
<p><strong>Syntax</strong></p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">CCL_ENABLE_SYCL_KERNELS</span><span class="o">=&lt;</span><span class="n">value</span><span class="o">&gt;</span><span class="w"></span>
</pre></div>
</div>
<p><strong>Arguments</strong></p>
<table class="colwidths-given table">
<colgroup>
<col style="width: 33%" />
<col style="width: 67%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>&lt;value&gt;</p></td>
<td><p>Description</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">1</span></code></p></td>
<td><p>Enable SYCL kernels.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">0</span></code></p></td>
<td><p>Disable SYCL kernels. The default value.</p></td>
</tr>
</tbody>
</table>
<p><strong>Description</strong></p>
<p>Setting this environment variable to 1 enables SYCL kernel-based implementations for <code class="docutils literal notranslate"><span class="pre">ALLGATHERV</span></code>, <code class="docutils literal notranslate"><span class="pre">ALLREDUCE</span></code>, and <code class="docutils literal notranslate"><span class="pre">REDUCE_SCATTER</span></code>.</p>
<p>This new optimization optimizes all message sizes and supports the following data types:</p>
<ul class="simple">
<li><p>int32</p></li>
<li><p>fp32</p></li>
<li><p>fp16</p></li>
<li><p>bf16</p></li>
<li><p>sum operations</p></li>
<li><p>single nodes</p></li>
</ul>
<p>oneCCL falls back to other implementations when the support is unavailable with SYCL kernels, so that you can set up this environment variable safely.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The name of this variable in 2021.12 was <code class="docutils literal notranslate"><span class="pre">CCL_SKIP_SCHEDULER</span></code>. Starting with 2021.13, the variable has been renamed to <code class="docutils literal notranslate"><span class="pre">CCL_ENABLE_SYCL_KERNELS</span></code>.</p>
</div>
</section>
</section>
</section>
</section>
<section id="workers">
<h2>Workers<a class="headerlink" href="#workers" title="Permalink to this headline">&#182;</a></h2>
<p>The group of environment variables to control worker threads.</p>
<section id="ccl-worker-count">
<span id="id4"></span><h3>CCL_WORKER_COUNT<a class="headerlink" href="#ccl-worker-count" title="Permalink to this headline">&#182;</a></h3>
<p><strong>Syntax</strong></p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">CCL_WORKER_COUNT</span><span class="o">=&lt;</span><span class="n">value</span><span class="o">&gt;</span><span class="w"></span>
</pre></div>
</div>
<p><strong>Arguments</strong></p>
<table class="colwidths-given table">
<colgroup>
<col style="width: 33%" />
<col style="width: 67%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>&lt;value&gt;</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">N</span></code></p></td>
<td><p>The number of worker threads for oneCCL rank (<code class="docutils literal notranslate"><span class="pre">1</span></code> if not specified).</p></td>
</tr>
</tbody>
</table>
<p><strong>Description</strong></p>
<p>Set this environment variable to specify the number of oneCCL worker threads.</p>
</section>
<section id="ccl-worker-affinity">
<span id="id5"></span><h3>CCL_WORKER_AFFINITY<a class="headerlink" href="#ccl-worker-affinity" title="Permalink to this headline">&#182;</a></h3>
<p><strong>Syntax</strong></p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">CCL_WORKER_AFFINITY</span><span class="o">=&lt;</span><span class="n">cpulist</span><span class="o">&gt;</span><span class="w"></span>
</pre></div>
</div>
<p><strong>Arguments</strong></p>
<table class="colwidths-given table">
<colgroup>
<col style="width: 33%" />
<col style="width: 67%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>&lt;cpulist&gt;</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">auto</span></code></p></td>
<td><p>Workers are automatically pinned to last cores of pin domain.
Pin domain depends from process launcher.
If <code class="docutils literal notranslate"><span class="pre">mpirun</span></code> from oneCCL package is used then pin domain is MPI process pin domain.
Otherwise, pin domain is all cores on the node.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">&lt;cpulist&gt;</span></code></p></td>
<td><p>A comma-separated list of core numbers and/or ranges of core numbers for all local workers, one number per worker.
The i-th local worker is pinned to the i-th core in the list.
For example <code class="docutils literal notranslate"><span class="pre">&lt;a&gt;,&lt;b&gt;-&lt;c&gt;</span></code> defines list of cores containing core with number <code class="docutils literal notranslate"><span class="pre">&lt;a&gt;</span></code>
and range of cores with numbers from <code class="docutils literal notranslate"><span class="pre">&lt;b&gt;</span></code> to <code class="docutils literal notranslate"><span class="pre">&lt;c&gt;</span></code>.
The core number should not exceed the number of cores available on the system. The length of the list should be equal to the number of workers.</p></td>
</tr>
</tbody>
</table>
<p><strong>Description</strong></p>
<p>Set this environment variable to specify cpu affinity for oneCCL worker threads.</p>
</section>
<section id="ccl-worker-mem-affinity">
<h3>CCL_WORKER_MEM_AFFINITY<a class="headerlink" href="#ccl-worker-mem-affinity" title="Permalink to this headline">&#182;</a></h3>
<p><strong>Syntax</strong></p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">CCL_WORKER_MEM_AFFINITY</span><span class="o">=&lt;</span><span class="n">nodelist</span><span class="o">&gt;</span><span class="w"></span>
</pre></div>
</div>
<p><strong>Arguments</strong></p>
<table class="colwidths-given table">
<colgroup>
<col style="width: 33%" />
<col style="width: 67%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>&lt;nodelist&gt;</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">auto</span></code></p></td>
<td><p>Workers are automatically pinned to NUMA nodes that correspond to CPU affinity of workers.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">&lt;nodelist&gt;</span></code></p></td>
<td><p>A comma-separated list of NUMA node numbers for all local workers, one number per worker.
The i-th local worker is pinned to the i-th NUMA node in the list.
The number should not exceed the number of NUMA nodes available on the system.</p></td>
</tr>
</tbody>
</table>
<p><strong>Description</strong></p>
<p>Set this environment variable to specify memory affinity for oneCCL worker threads.</p>
</section>
</section>
<section id="atl">
<h2>ATL<a class="headerlink" href="#atl" title="Permalink to this headline">&#182;</a></h2>
<p>The group of environment variables to control ATL (abstract transport layer).</p>
<section id="ccl-atl-transport">
<span id="id6"></span><h3>CCL_ATL_TRANSPORT<a class="headerlink" href="#ccl-atl-transport" title="Permalink to this headline">&#182;</a></h3>
<p><strong>Syntax</strong></p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">CCL_ATL_TRANSPORT</span><span class="o">=&lt;</span><span class="n">value</span><span class="o">&gt;</span><span class="w"></span>
</pre></div>
</div>
<p><strong>Arguments</strong></p>
<table class="colwidths-given table">
<colgroup>
<col style="width: 33%" />
<col style="width: 67%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>&lt;value&gt;</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">mpi</span></code></p></td>
<td><p>MPI transport (<strong>default</strong>).</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">ofi</span></code></p></td>
<td><p>OFI (libfabric*) transport.</p></td>
</tr>
</tbody>
</table>
<p><strong>Description</strong></p>
<p>Set this environment variable to select the transport for inter-process communications.</p>
</section>
<section id="ccl-atl-hmem">
<h3>CCL_ATL_HMEM<a class="headerlink" href="#ccl-atl-hmem" title="Permalink to this headline">&#182;</a></h3>
<p><strong>Syntax</strong></p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">CCL_ATL_HMEM</span><span class="o">=&lt;</span><span class="n">value</span><span class="o">&gt;</span><span class="w"></span>
</pre></div>
</div>
<p><strong>Arguments</strong></p>
<table class="colwidths-given table">
<colgroup>
<col style="width: 33%" />
<col style="width: 67%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>&lt;value&gt;</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">1</span></code></p></td>
<td><p>Enable heterogeneous memory support on the transport layer.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">0</span></code></p></td>
<td><p>Disable heterogeneous memory support on the transport layer (<strong>default</strong>).</p></td>
</tr>
</tbody>
</table>
<p><strong>Description</strong></p>
<p>Set this environment variable to enable handling of HMEM/GPU buffers by the transport layer.
The actual HMEM support depends on the limitations on the transport level and system configuration.</p>
</section>
<section id="ccl-atl-shm">
<h3>CCL_ATL_SHM<a class="headerlink" href="#ccl-atl-shm" title="Permalink to this headline">&#182;</a></h3>
<p><strong>Syntax</strong></p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">CCL_ATL_SHM</span><span class="o">=&lt;</span><span class="n">value</span><span class="o">&gt;</span><span class="w"></span>
</pre></div>
</div>
<p><strong>Arguments</strong></p>
<table class="colwidths-given table">
<colgroup>
<col style="width: 33%" />
<col style="width: 67%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>&lt;value&gt;</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">0</span></code></p></td>
<td><p>Disables the OFI shared memory provider. The default value.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">1</span></code></p></td>
<td><p>Enables the OFI shared memory provider.</p></td>
</tr>
</tbody>
</table>
<p><strong>Description</strong></p>
<p>Set this environment variable to enable the OFI shared memory provider to
communicate between ranks in the same node of the host (CPU) buffers. This
capability requires OFI as the transport (<code class="docutils literal notranslate"><span class="pre">CCL_ATL_TRANSPORT=ofi</span></code>).</p>
<p>The OFI/SHM provider has support to utilize the <a class="reference external" href="https://01.org/blogs/2019/introducing-intel-data-streaming-accelerator">Intel(R) Data Streaming Accelerator* (DSA)</a>.
To run it with DSA*, you need:
* Linux* OS kernel support for the DSA* shared work queues
* Libfabric* 1.17 or later</p>
<p>To enable DSA, set the following environment variables:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">FI_SHM_DISABLE_CMA</span><span class="o">=</span><span class="mi">1</span><span class="w"></span>
<span class="n">FI_SHM_USE_DSA_SAR</span><span class="o">=</span><span class="mi">1</span><span class="w"></span>
</pre></div>
</div>
<p>Refer to Libfabric* Programmer&#8217;s Manual for the additional details about DSA*
support in the SHM provider:
<a class="reference external" href="https://ofiwg.github.io/libfabric/main/man/fi_shm.7.html">https://ofiwg.github.io/libfabric/main/man/fi_shm.7.html</a>.</p>
</section>
<section id="ccl-process-launcher">
<h3>CCL_PROCESS_LAUNCHER<a class="headerlink" href="#ccl-process-launcher" title="Permalink to this headline">&#182;</a></h3>
<p><strong>Syntax</strong></p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">CCL_PROCESS_LAUNCHER</span><span class="o">=&lt;</span><span class="n">value</span><span class="o">&gt;</span><span class="w"></span>
</pre></div>
</div>
<p><strong>Arguments</strong></p>
<table class="colwidths-given table">
<colgroup>
<col style="width: 33%" />
<col style="width: 67%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>&lt;value&gt;</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">hydra</span></code></p></td>
<td><p>Uses the MPI hydra job launcher. The default value.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">torch</span></code></p></td>
<td><p>Uses a torch job launcher.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">pmix</span></code></p></td>
<td><p>Is used with the PALS job launcher that uses the pmix API. The <code class="docutils literal notranslate"><span class="pre">mpiexec</span></code> command should be similar to:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">CCL_PROCESS_LAUNCHER</span><span class="o">=</span><span class="n">pmix</span><span class="w"> </span><span class="n">CCL_ATL_TRANSPORT</span><span class="o">=</span><span class="n">mpi</span><span class="w"> </span><span class="n">mpiexec</span><span class="w"> </span><span class="o">-</span><span class="n">np</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="o">-</span><span class="n">ppn</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="o">--</span><span class="n">pmi</span><span class="o">=</span><span class="n">pmix</span><span class="w"> </span><span class="p">...</span><span class="w"></span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">none</span></code></p></td>
<td><p>No job launcher is used. You should specify the values for <code class="docutils literal notranslate"><span class="pre">CCL_LOCAL_SIZE</span> <span class="pre">and</span> <span class="pre">CCL_LOCAL_RANK</span></code>.</p></td>
</tr>
</tbody>
</table>
<p><strong>Description</strong></p>
<p>Set this environment variable to specify the job launcher.</p>
</section>
<section id="ccl-local-size">
<h3>CCL_LOCAL_SIZE<a class="headerlink" href="#ccl-local-size" title="Permalink to this headline">&#182;</a></h3>
<p><strong>Syntax</strong></p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">CCL_LOCAL_SIZE</span><span class="o">=&lt;</span><span class="n">value</span><span class="o">&gt;</span><span class="w"></span>
</pre></div>
</div>
<p><strong>Arguments</strong></p>
<table class="colwidths-given table">
<colgroup>
<col style="width: 33%" />
<col style="width: 67%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>&lt;value&gt;</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">SIZE</span></code></p></td>
<td><p>A total number of ranks on the local host.</p></td>
</tr>
</tbody>
</table>
<p><strong>Description</strong></p>
<p>Set this environment variable to specify a total number of ranks on a local host.</p>
</section>
<section id="ccl-local-rank">
<h3>CCL_LOCAL_RANK<a class="headerlink" href="#ccl-local-rank" title="Permalink to this headline">&#182;</a></h3>
<p><strong>Syntax</strong></p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">CCL_LOCAL_RANK</span><span class="o">=&lt;</span><span class="n">value</span><span class="o">&gt;</span><span class="w"></span>
</pre></div>
</div>
<p><strong>Arguments</strong></p>
<table class="colwidths-given table">
<colgroup>
<col style="width: 33%" />
<col style="width: 67%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>&lt;value&gt;</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">RANK</span></code></p></td>
<td><p>Rank number of the current process on the local host.</p></td>
</tr>
</tbody>
</table>
<p><strong>Description</strong></p>
<p>Set this environment variable to specify the rank number of the current process in the local host.</p>
</section>
</section>
<section id="multi-nic">
<h2>Multi-NIC<a class="headerlink" href="#multi-nic" title="Permalink to this headline">&#182;</a></h2>
<p><code class="docutils literal notranslate"><span class="pre">CCL_MNIC</span></code>, <code class="docutils literal notranslate"><span class="pre">CCL_MNIC_NAME</span></code> and <code class="docutils literal notranslate"><span class="pre">CCL_MNIC_COUNT</span></code> define filters to select multiple NICs.
oneCCL workers will be pinned on selected NICs in a round-robin way.</p>
<section id="ccl-mnic">
<h3>CCL_MNIC<a class="headerlink" href="#ccl-mnic" title="Permalink to this headline">&#182;</a></h3>
<p><strong>Syntax</strong></p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">CCL_MNIC</span><span class="o">=&lt;</span><span class="n">value</span><span class="o">&gt;</span><span class="w"></span>
</pre></div>
</div>
<p><strong>Arguments</strong></p>
<table class="colwidths-given table">
<colgroup>
<col style="width: 33%" />
<col style="width: 67%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>&lt;value&gt;</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">global</span></code></p></td>
<td><p>Select all NICs available on the node.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">local</span></code></p></td>
<td><p>Select all NICs local for the NUMA node that corresponds to process pinning.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">none</span></code></p></td>
<td><p>Disable special NIC selection, use a single default NIC (<strong>default</strong>).</p></td>
</tr>
</tbody>
</table>
<p><strong>Description</strong></p>
<p>Set this environment variable to control multi-NIC selection by NIC locality.</p>
</section>
<section id="ccl-mnic-name">
<h3>CCL_MNIC_NAME<a class="headerlink" href="#ccl-mnic-name" title="Permalink to this headline">&#182;</a></h3>
<p><strong>Syntax</strong></p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">CCL_MNIC_NAME</span><span class="o">=&lt;</span><span class="n">namelist</span><span class="o">&gt;</span><span class="w"></span>
</pre></div>
</div>
<p><strong>Arguments</strong></p>
<table class="colwidths-given table">
<colgroup>
<col style="width: 33%" />
<col style="width: 67%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>&lt;namelist&gt;</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">&lt;namelist&gt;</span></code></p></td>
<td><p>A comma-separated list of NIC full names or prefixes to filter NICs.
Use the <code class="docutils literal notranslate"><span class="pre">^</span></code> symbol to exclude NICs starting with the specified prefixes. For example,
if you provide a list <code class="docutils literal notranslate"><span class="pre">mlx5_0,mlx5_1,^mlx5_2</span></code>, NICs with the names <code class="docutils literal notranslate"><span class="pre">mlx5_0</span></code> and <code class="docutils literal notranslate"><span class="pre">mlx5_1</span></code>
will be selected, while <code class="docutils literal notranslate"><span class="pre">mlx5_2</span></code> will be excluded from the selection.</p></td>
</tr>
</tbody>
</table>
<p><strong>Description</strong></p>
<p>Set this environment variable to control multi-NIC selection by NIC names.</p>
</section>
<section id="ccl-mnic-count">
<h3>CCL_MNIC_COUNT<a class="headerlink" href="#ccl-mnic-count" title="Permalink to this headline">&#182;</a></h3>
<p><strong>Syntax</strong></p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">CCL_MNIC_COUNT</span><span class="o">=&lt;</span><span class="n">value</span><span class="o">&gt;</span><span class="w"></span>
</pre></div>
</div>
<p><strong>Arguments</strong></p>
<table class="colwidths-given table">
<colgroup>
<col style="width: 33%" />
<col style="width: 67%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>&lt;value&gt;</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">N</span></code></p></td>
<td><p>The maximum number of NICs that should be selected for oneCCL workers.
If not specified then equal to the number of oneCCL workers.</p></td>
</tr>
</tbody>
</table>
<p><strong>Description</strong></p>
<p>Set this environment variable to specify the maximum number of NICs to be
selected. The actual number of NICs selected may be smaller due to limitations
on transport level or system configuration.</p>
</section>
</section>
<section id="inter-process-communication-ipc">
<h2>Inter Process Communication (IPC)<a class="headerlink" href="#inter-process-communication-ipc" title="Permalink to this headline">&#182;</a></h2>
<section id="ccl-ze-cache-open-ipc-handles-threshold">
<h3>CCL_ZE_CACHE_OPEN_IPC_HANDLES_THRESHOLD<a class="headerlink" href="#ccl-ze-cache-open-ipc-handles-threshold" title="Permalink to this headline">&#182;</a></h3>
<p><strong>Syntax</strong></p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">CCL_ZE_CACHE_OPEN_IPC_HANDLES_THRESHOLD</span><span class="o">=&lt;</span><span class="n">value</span><span class="o">&gt;</span><span class="w"></span>
</pre></div>
</div>
<table class="colwidths-given table">
<colgroup>
<col style="width: 33%" />
<col style="width: 67%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>&lt;value&gt;</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">N</span></code></p></td>
<td><p>The number IPC handles in the receiver cache. The default value is 1000.</p></td>
</tr>
</tbody>
</table>
<p><strong>Description</strong></p>
<p>Use this environment variable to change the number of IPC
handles opened with <code class="docutils literal notranslate"><span class="pre">zeMemOpenIpcHandle()</span></code> that oneCCL maintains in its receiving
cache. IPC handles refer to <a class="reference external" href="https://spec.oneapi.io/level-zero/latest/core/PROG.html#memory-1">Level Zero Memory IPCs</a>.</p>
<p>The IPC handles opened with <code class="docutils literal notranslate"><span class="pre">zeMemOpenIpcHandle()</span></code> are stored by oneCCL in
the receiving cache. However, when the number of opened IPC handles exceeds the
specified threshold, the cache will evict a handle using a LRU (Last Recently
Used) policy. Starting with version 2021.10, the default value is 1000.</p>
</section>
<section id="ccl-ze-cache-get-ipc-handles-threshold">
<h3>CCL_ZE_CACHE_GET_IPC_HANDLES_THRESHOLD<a class="headerlink" href="#ccl-ze-cache-get-ipc-handles-threshold" title="Permalink to this headline">&#182;</a></h3>
<p><strong>Syntax</strong></p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">CCL_ZE_CACHE_GET_IPC_HANDLES_THRESHOLD</span><span class="o">=&lt;</span><span class="n">value</span><span class="o">&gt;</span><span class="w"></span>
</pre></div>
</div>
<table class="colwidths-given table">
<colgroup>
<col style="width: 33%" />
<col style="width: 67%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>&lt;value&gt;</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">N</span></code></p></td>
<td><p>The number IPC handles in the receiver cache. The default value is 1000.</p></td>
</tr>
</tbody>
</table>
<p><strong>Description</strong></p>
<p>Use this environment variable to change the number of IPC handles obtained with
<code class="docutils literal notranslate"><span class="pre">zeMemGetIpcHandle()</span></code> that oneCCL maintains in its sender cache. IPC handles
refer to <a class="reference external" href="https://spec.oneapi.io/level-zero/latest/core/PROG.html#memory-1">Level Zero Memory IPCs</a>.</p>
<p>The IPC handles obtained with <code class="docutils literal notranslate"><span class="pre">zeMemGetIpcHandle()</span></code> are stored by oneCCL in the
sender cache. However, when the number of get IPC handles exceeds the specified
threshold, the cache will evict a handle using a LRU (Last Recently Used)
policy. The default value is 1000.</p>
</section>
</section>
<section id="low-precision-datatypes">
<span id="id8"></span><h2>Low-precision datatypes<a class="headerlink" href="#low-precision-datatypes" title="Permalink to this headline">&#182;</a></h2>
<p>The group of environment variables to control processing of low-precision datatypes.</p>
<section id="ccl-bf16">
<h3>CCL_BF16<a class="headerlink" href="#ccl-bf16" title="Permalink to this headline">&#182;</a></h3>
<p><strong>Syntax</strong></p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">CCL_BF16</span><span class="o">=&lt;</span><span class="n">value</span><span class="o">&gt;</span><span class="w"></span>
</pre></div>
</div>
<p><strong>Arguments</strong></p>
<table class="colwidths-given table">
<colgroup>
<col style="width: 33%" />
<col style="width: 67%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>&lt;value&gt;</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">avx512f</span></code></p></td>
<td><p>Select implementation based on <code class="docutils literal notranslate"><span class="pre">AVX512F</span></code> instructions.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">avx512bf</span></code></p></td>
<td><p>Select implementation based on <code class="docutils literal notranslate"><span class="pre">AVX512_BF16</span></code> instructions.</p></td>
</tr>
</tbody>
</table>
<p><strong>Description</strong></p>
<p>Set this environment variable to select implementation for BF16 &lt;-&gt; FP32
conversion on reduction phase of collective operation. The default value
depends on instruction set support on specific CPU. <code class="docutils literal notranslate"><span class="pre">AVX512_BF16</span></code>-based
implementation has precedence over <code class="docutils literal notranslate"><span class="pre">AVX512F</span></code>-based one.</p>
</section>
<section id="ccl-fp16">
<h3>CCL_FP16<a class="headerlink" href="#ccl-fp16" title="Permalink to this headline">&#182;</a></h3>
<p><strong>Syntax</strong></p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">CCL_FP16</span><span class="o">=&lt;</span><span class="n">value</span><span class="o">&gt;</span><span class="w"></span>
</pre></div>
</div>
<p><strong>Arguments</strong></p>
<table class="colwidths-given table">
<colgroup>
<col style="width: 33%" />
<col style="width: 67%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>&lt;value&gt;</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">f16c</span></code></p></td>
<td><p>Select implementation based on <code class="docutils literal notranslate"><span class="pre">F16C</span></code> instructions.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">avx512f</span></code></p></td>
<td><p>Select implementation based on <code class="docutils literal notranslate"><span class="pre">AVX512F</span></code> instructions.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">avx512fp16</span></code></p></td>
<td><p>Select implementation based on <code class="docutils literal notranslate"><span class="pre">AVX512FP16</span></code> instructions.</p></td>
</tr>
</tbody>
</table>
<p><strong>Description</strong></p>
<p>Set this environment variable to select implementation for on reduction phase of collective operation.
<code class="docutils literal notranslate"><span class="pre">AVX512FP16</span></code> uses native FP16 numeric operations for reduction.
<code class="docutils literal notranslate"><span class="pre">AVX512F</span></code> and <code class="docutils literal notranslate"><span class="pre">F16C</span></code> use FP16 &lt;-&gt; FP32 conversion operations to perform the reduction.
The default value depends on instruction set support on specific CPU.
<code class="docutils literal notranslate"><span class="pre">AVX512FP16</span></code>-based implementation has precedence over <code class="docutils literal notranslate"><span class="pre">AVX512F</span></code> and <code class="docutils literal notranslate"><span class="pre">F16C</span></code>-based one.</p>
</section>
</section>
<section id="ccl-log-level">
<h2>CCL_LOG_LEVEL<a class="headerlink" href="#ccl-log-level" title="Permalink to this headline">&#182;</a></h2>
<p><strong>Syntax</strong></p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">CCL_LOG_LEVEL</span><span class="o">=&lt;</span><span class="n">value</span><span class="o">&gt;</span><span class="w"></span>
</pre></div>
</div>
<p><strong>Arguments</strong></p>
<table class="table">
<colgroup>
<col style="width: 100%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>&lt;value&gt;</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">error</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">warn</span></code> (<strong>default</strong>)</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">info</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">debug</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">trace</span></code></p></td>
</tr>
</tbody>
</table>
<p><strong>Description</strong></p>
<p>Set this environment variable to control logging level.</p>
</section>
<section id="ccl-itt-level">
<h2>CCL_ITT_LEVEL<a class="headerlink" href="#ccl-itt-level" title="Permalink to this headline">&#182;</a></h2>
<p><strong>Syntax</strong></p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">CCL_ITT_LEVEL</span><span class="o">=&lt;</span><span class="n">value</span><span class="o">&gt;</span><span class="w"></span>
</pre></div>
</div>
<p><strong>Arguments</strong></p>
<table class="colwidths-given table">
<colgroup>
<col style="width: 33%" />
<col style="width: 67%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>&lt;value&gt;</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">1</span></code></p></td>
<td><p>Enable support for ITT profiling.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">0</span></code></p></td>
<td><p>Disable support for ITT profiling (<strong>default</strong>).</p></td>
</tr>
</tbody>
</table>
<p><strong>Description</strong></p>
<p>Set this environment variable to specify Intel&#174; Instrumentation and Tracing Technology (ITT) profiling level.
Once the environment variable is enabled (value &gt; 0), it is possible to collect and display profiling
data for oneCCL using tools such as Intel&#174; VTune&#8482; Profiler.</p>
</section>
<section id="fusion">
<h2>Fusion<a class="headerlink" href="#fusion" title="Permalink to this headline">&#182;</a></h2>
<p>The group of environment variables to control fusion of collective operations.</p>
<section id="ccl-fusion">
<h3>CCL_FUSION<a class="headerlink" href="#ccl-fusion" title="Permalink to this headline">&#182;</a></h3>
<p><strong>Syntax</strong></p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">CCL_FUSION</span><span class="o">=&lt;</span><span class="n">value</span><span class="o">&gt;</span><span class="w"></span>
</pre></div>
</div>
<p><strong>Arguments</strong></p>
<table class="colwidths-given table">
<colgroup>
<col style="width: 33%" />
<col style="width: 67%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>&lt;value&gt;</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">1</span></code></p></td>
<td><p>Enable fusion of collective operations</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">0</span></code></p></td>
<td><p>Disable fusion of collective operations (<strong>default</strong>)</p></td>
</tr>
</tbody>
</table>
<p><strong>Description</strong></p>
<p>Set this environment variable to control fusion of collective operations.
The real fusion depends on additional settings described below.</p>
</section>
<section id="ccl-fusion-bytes-threshold">
<span id="id9"></span><h3>CCL_FUSION_BYTES_THRESHOLD<a class="headerlink" href="#ccl-fusion-bytes-threshold" title="Permalink to this headline">&#182;</a></h3>
<p><strong>Syntax</strong></p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">CCL_FUSION_BYTES_THRESHOLD</span><span class="o">=&lt;</span><span class="n">value</span><span class="o">&gt;</span><span class="w"></span>
</pre></div>
</div>
<p><strong>Arguments</strong></p>
<table class="colwidths-given table">
<colgroup>
<col style="width: 33%" />
<col style="width: 67%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>&lt;value&gt;</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">SIZE</span></code></p></td>
<td><p>Bytes threshold for a collective operation. If the size of a communication buffer in bytes is less than or equal
to <code class="docutils literal notranslate"><span class="pre">SIZE</span></code>, then oneCCL fuses this operation with the other ones.</p></td>
</tr>
</tbody>
</table>
<p><strong>Description</strong></p>
<p>Set this environment variable to specify the threshold of the number of bytes for a collective operation to be fused.</p>
</section>
<section id="ccl-fusion-count-threshold">
<span id="id10"></span><h3>CCL_FUSION_COUNT_THRESHOLD<a class="headerlink" href="#ccl-fusion-count-threshold" title="Permalink to this headline">&#182;</a></h3>
<p><strong>Syntax</strong></p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">CCL_FUSION_COUNT_THRESHOLD</span><span class="o">=&lt;</span><span class="n">value</span><span class="o">&gt;</span><span class="w"></span>
</pre></div>
</div>
<p><strong>Arguments</strong></p>
<table class="colwidths-given table">
<colgroup>
<col style="width: 33%" />
<col style="width: 67%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>&lt;value&gt;</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">COUNT</span></code></p></td>
<td><p>The threshold for the number of collective operations.
oneCCL can fuse together no more than <code class="docutils literal notranslate"><span class="pre">COUNT</span></code> operations at a time.</p></td>
</tr>
</tbody>
</table>
<p><strong>Description</strong></p>
<p>Set this environment variable to specify count threshold for a collective operation to be fused.</p>
</section>
<section id="ccl-fusion-cycle-ms">
<span id="id11"></span><h3>CCL_FUSION_CYCLE_MS<a class="headerlink" href="#ccl-fusion-cycle-ms" title="Permalink to this headline">&#182;</a></h3>
<p><strong>Syntax</strong></p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">CCL_FUSION_CYCLE_MS</span><span class="o">=&lt;</span><span class="n">value</span><span class="o">&gt;</span><span class="w"></span>
</pre></div>
</div>
<p><strong>Arguments</strong></p>
<table class="colwidths-given table">
<colgroup>
<col style="width: 33%" />
<col style="width: 67%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>&lt;value&gt;</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">MS</span></code></p></td>
<td><p>The frequency of checking for collectives operations to be fused, in milliseconds:</p>
<ul class="simple">
<li><p>Small <code class="docutils literal notranslate"><span class="pre">MS</span></code> value can improve latency.</p></li>
<li><p>Large <code class="docutils literal notranslate"><span class="pre">MS</span></code> value can help to fuse larger number of operations at a time.</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
<p><strong>Description</strong></p>
<p>Set this environment variable to specify the frequency of checking for collectives operations to be fused.</p>
</section>
</section>
<section id="ccl-priority">
<span id="id12"></span><h2>CCL_PRIORITY<a class="headerlink" href="#ccl-priority" title="Permalink to this headline">&#182;</a></h2>
<p><strong>Syntax</strong></p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">CCL_PRIORITY</span><span class="o">=&lt;</span><span class="n">value</span><span class="o">&gt;</span><span class="w"></span>
</pre></div>
</div>
<p><strong>Arguments</strong></p>
<table class="colwidths-given table">
<colgroup>
<col style="width: 33%" />
<col style="width: 67%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>&lt;value&gt;</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">direct</span></code></p></td>
<td><p>You have to explicitly specify priority using <code class="docutils literal notranslate"><span class="pre">priority</span></code>.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">lifo</span></code></p></td>
<td><p>Priority is implicitly increased on each collective call. You do not have to specify priority.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">none</span></code></p></td>
<td><p>Disable prioritization (<strong>default</strong>).</p></td>
</tr>
</tbody>
</table>
<p><strong>Description</strong></p>
<p>Set this environment variable to control priority mode of collective operations.</p>
</section>
<section id="ccl-max-short-size">
<h2>CCL_MAX_SHORT_SIZE<a class="headerlink" href="#ccl-max-short-size" title="Permalink to this headline">&#182;</a></h2>
<p><strong>Syntax</strong></p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">CCL_MAX_SHORT_SIZE</span><span class="o">=&lt;</span><span class="n">value</span><span class="o">&gt;</span><span class="w"></span>
</pre></div>
</div>
<p><strong>Arguments</strong></p>
<table class="colwidths-given table">
<colgroup>
<col style="width: 33%" />
<col style="width: 67%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>&lt;value&gt;</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">SIZE</span></code></p></td>
<td><p>Bytes threshold for a collective operation (<code class="docutils literal notranslate"><span class="pre">0</span></code> if not specified).
If the size of a communication buffer in bytes is less than or equal to
<code class="docutils literal notranslate"><span class="pre">SIZE</span></code>, then oneCCL does not split operation between workers.
Applicable for <code class="docutils literal notranslate"><span class="pre">ALLREDUCE</span></code>, <code class="docutils literal notranslate"><span class="pre">REDUCE</span></code> and <code class="docutils literal notranslate"><span class="pre">BROADCAST</span></code>.</p></td>
</tr>
</tbody>
</table>
<p><strong>Description</strong></p>
<p>Set this environment variable to specify the threshold of the number of bytes for a collective operation to be split.</p>
</section>
<section id="ccl-sycl-output-event">
<h2>CCL_SYCL_OUTPUT_EVENT<a class="headerlink" href="#ccl-sycl-output-event" title="Permalink to this headline">&#182;</a></h2>
<p><strong>Syntax</strong></p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">CCL_SYCL_OUTPUT_EVENT</span><span class="o">=&lt;</span><span class="n">value</span><span class="o">&gt;</span><span class="w"></span>
</pre></div>
</div>
<p><strong>Arguments</strong></p>
<table class="colwidths-given table">
<colgroup>
<col style="width: 33%" />
<col style="width: 67%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>&lt;value&gt;</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">1</span></code></p></td>
<td><p>Enable support for SYCL output event (<strong>default</strong>).</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">0</span></code></p></td>
<td><p>Disable support for SYCL output event.</p></td>
</tr>
</tbody>
</table>
<p><strong>Description</strong></p>
<p>Set this environment variable to control support for SYCL output event.
Once the support is enabled, you can retrieve SYCL output event from oneCCL event using <code class="docutils literal notranslate"><span class="pre">get_native()</span></code> method.
oneCCL event must be associated with oneCCL communication operation.</p>
</section>
<section id="ccl-ze-library-path">
<h2>CCL_ZE_LIBRARY_PATH<a class="headerlink" href="#ccl-ze-library-path" title="Permalink to this headline">&#182;</a></h2>
<p><strong>Syntax</strong></p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">CCL_ZE_LIBRARY_PATH</span><span class="o">=&lt;</span><span class="n">value</span><span class="o">&gt;</span><span class="w"></span>
</pre></div>
</div>
<p><strong>Arguments</strong></p>
<table class="colwidths-given table">
<colgroup>
<col style="width: 33%" />
<col style="width: 67%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>&lt;value&gt;</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">PATH/NAME</span></code></p></td>
<td><p>Specify the name and full path to the <code class="docutils literal notranslate"><span class="pre">Level-Zero</span></code> library for dynamic loading by oneCCL.</p></td>
</tr>
</tbody>
</table>
<p><strong>Description</strong></p>
<p>Set this environment variable to specify the name and full path to
<code class="docutils literal notranslate"><span class="pre">Level-Zero</span></code> library. The path should be absolute and validated. Set this
variable if <code class="docutils literal notranslate"><span class="pre">Level-Zero</span></code> is not located in the default path. By default
oneCCL uses <code class="docutils literal notranslate"><span class="pre">libze_loader.so</span></code> name for dynamic loading.</p>
</section>
<section id="point-to-point-operations">
<h2>Point-To-Point Operations<a class="headerlink" href="#point-to-point-operations" title="Permalink to this headline">&#182;</a></h2>
<section id="ccl-recv">
<h3>CCL_RECV<a class="headerlink" href="#ccl-recv" title="Permalink to this headline">&#182;</a></h3>
<p><strong>Syntax</strong></p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">CCL_RECV</span><span class="o">=&lt;</span><span class="n">value</span><span class="o">&gt;</span><span class="w"></span>
</pre></div>
</div>
<p><strong>Arguments</strong></p>
<table class="colwidths-given table">
<colgroup>
<col style="width: 33%" />
<col style="width: 67%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>&lt;value&gt;</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">direct</span></code></p></td>
<td><p>Based on the MPI*/OFI* transport layer.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">topo</span></code></p></td>
<td><p>Uses Intel(R) Xe Link technology across GPUs in a multi-GPU node. The default for GPU buffers.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">offload</span></code></p></td>
<td><p>Based on the MPI*/OFI* transport layer and GPU RDMA when supported by the hardware.</p></td>
</tr>
</tbody>
</table>
</section>
<section id="ccl-send">
<h3>CCL_SEND<a class="headerlink" href="#ccl-send" title="Permalink to this headline">&#182;</a></h3>
<p><strong>Syntax</strong></p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">CCL_SEND</span><span class="o">=&lt;</span><span class="n">value</span><span class="o">&gt;</span><span class="w"></span>
</pre></div>
</div>
<p><strong>Arguments</strong></p>
<table class="colwidths-given table">
<colgroup>
<col style="width: 33%" />
<col style="width: 67%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>&lt;value&gt;</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">direct</span></code></p></td>
<td><p>Based on the MPI*/OFI* transport layer.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">topo</span></code></p></td>
<td><p>Uses Intel(R) Xe Link technology across GPUs in a multi-GPU node. The default for GPU buffers.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">offload</span></code></p></td>
<td><p>Based on the MPI*/OFI* transport layer and GPU RDMA when supported by the hardware.</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="ccl-ze-tmp-buf-size">
<h2>CCL_ZE_TMP_BUF_SIZE<a class="headerlink" href="#ccl-ze-tmp-buf-size" title="Permalink to this headline">&#182;</a></h2>
<p><strong>Syntax</strong></p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">CCL_ZE_TMP_BUF_SIZE</span><span class="o">=&lt;</span><span class="n">value</span><span class="o">&gt;</span><span class="w"></span>
</pre></div>
</div>
<p><strong>Arguments</strong></p>
<table class="colwidths-given table">
<colgroup>
<col style="width: 33%" />
<col style="width: 67%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>&lt;value&gt;</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">N</span></code></p></td>
<td><p>Size of the temporary buffer (in bytes) oneCCL uses to perform
collective operations with topo algorithm and Level Zero path. Default is 536870912, that is, 512 MBs.</p></td>
</tr>
</tbody>
</table>
<p><strong>Description</strong></p>
<p>Set this environment variable to change the size of the temporary buffer used
by the topo algorithm in the Level Zero path. The value is specified in bytes.
The default value is 536870912.</p>
<p>You can tune the value of this variable depending on the system memory
available, the memory the application requires, and the message size of the
collectives used. With larger values, oneCCL consumes more memory but can
provide higher performance. Similarly, small values will reduce memory
utilization, but can degrade performance.</p>
</section>
</section>


              </div>
              
        
            <!-- Previous / next buttons -->
<div class='prev-next-area'> 
    <a class='left-prev' id="prev-link" href="api/operations/point-to-point.html" title="previous page">
        <i class="fas fa-angle-left"></i>
        <div class="prev-next-info">
            <p class="prev-next-subtitle">previous</p>
            <p class="prev-next-title">Point-To-Point Operations</p>
        </div>
    </a>
    <a class='right-next' id="next-link" href="benchmark.html" title="next page">
    <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">oneCCL Benchmark User Guide</p>
    </div>
    <i class="fas fa-angle-right"></i>
    </a>
</div>
        
        </div>
    </div>
    <footer class="footer">
    <div class="container">
      <p>
        
          By Intel<br/>
        
            &copy; Copyright Intel Corporation.<br/>
          <div class="extra_footer">
            <p align="right"><a href="https://www.intel.com/content/www/us/en/privacy/intel-cookie-notice.html">Cookies</a></p>
          </div>
      </p>
    </div>
  </footer>
</main>


      </div>
    </div>
  
  <script src="_static/js/index.be7d3bbb2ef33a8344ce.js"></script>

  </body>
</html>